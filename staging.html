<!doctype html>
<html lang="it" dir="ltr" data-theme="dark" data-language="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">

  <title>Emanuele Passarelli | Artigiano del Ritratto</title>
  <link rel="icon" href="favicon.jpg">
  <meta name="description" content="Ritratto Unico in grande formato, tecniche antiche e stampe da custodire. Italia nel Grande Formato, biografia e contatti di Emanuele Passarelli.">
  <meta name="robots" content="index,follow,max-image-preview:large">
  <meta name="color-scheme" content="dark light">
  <meta name="theme-color" content="#0b0c0f">
  <meta name="format-detection" content="telephone=no">

  <link rel="canonical" href="https://emanuelepassarelli.it/">

  <link rel="icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">

  <meta property="og:locale" content="it_IT">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Emanuele Passarelli · Artigiano del Ritratto">
  <meta property="og:title" content="Emanuele Passarelli · Artigiano del Ritratto">
  <meta property="og:description" content="Ritratto Unico, Italia nel Grande Formato, biografia e contatti.">
  <meta property="og:url" content="https://emanuelepassarelli.it/">
  <meta property="og:image" content="https://emanuelepassarelli.it/img/og-cover.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Emanuele Passarelli · Artigiano del Ritratto">
  <meta name="twitter:card" content="summary_large_image">

  <link rel="alternate" hreflang="it" href="https://emanuelepassarelli.it/">
  <link rel="alternate" hreflang="en" href="https://emanuelepassarelli.it/?lang=en">
  <link rel="alternate" hreflang="x-default" href="https://emanuelepassarelli.it/">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300..900&family=Inter:wght@200..900&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" referrerpolicy="no-referrer">

  <!-- Lightbox (CDN, niente download) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css">

  <style>
    :root{ color-scheme: dark light; }
    html, body{ overflow-x:hidden; }
    body{ margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    a{ color:inherit; }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
    .skip-link{ position:absolute; left:-9999px; top:0; padding:.75rem 1rem; background:#111; border:1px solid #333; border-radius:.75rem; z-index:9999; }
    .skip-link:focus{ left:.75rem; top:.75rem; }
  </style>

  <style>
    :root{
      --font-body: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --font-display: Fraunces, ui-serif, Georgia, serif;

      --fs-0: clamp(0.94rem, 0.88rem + 0.22vw, 1.02rem);
      --fs-1: clamp(1.08rem, 0.96rem + 0.55vw, 1.28rem);
      --fs-2: clamp(1.42rem, 1.10rem + 1.25vw, 2.00rem);
      --fs-3: clamp(1.95rem, 1.35rem + 2.25vw, 2.95rem);
      --fs-4: clamp(2.60rem, 1.70rem + 3.10vw, 3.90rem);

      --s-1: clamp(0.55rem, 0.44rem + 0.32vw, 0.72rem);
      --s-2: clamp(0.88rem, 0.70rem + 0.55vw, 1.18rem);
      --s-3: clamp(1.20rem, 0.95rem + 0.85vw, 1.70rem);
      --s-4: clamp(1.58rem, 1.15rem + 1.30vw, 2.25rem);
      --s-5: clamp(2.20rem, 1.45rem + 2.15vw, 3.30rem);
      --s-6: clamp(3.10rem, 2.00rem + 3.20vw, 5.10rem);

      --r-1: 12px;
      --r-2: 18px;
      --r-3: 28px;

            --r-ui: 6px;
--ease-out: cubic-bezier(.16,1,.3,1);
      --ease-soft: cubic-bezier(.2,.8,.2,1);
      --dur-1: 180ms;
      --dur-2: 320ms;
      --dur-3: 720ms;

      --wrap: min(1120px, calc(100% - 2*clamp(1rem, 4vw, 2.2rem)));

      --accent: rgba(232,223,214,.92);
      --accent-soft: rgba(232,223,214,.14);
      --ph-breath: 2.6s;
    }

    :root[data-theme="dark"]{
      /* DARK THEME BACKGROUND:
         Cambia QUI il colore di sfondo del tema scuro (es: #212121) */
      --bg: #212121;

      /* Se vuoi un look coerente, puoi regolare anche questi due valori */
      --bg-2: #1c1c1c;
      --bg-3: #242424;

      --surface: rgba(255,255,255,.035);
      --surface-2: rgba(255,255,255,.055);
      --surface-3: rgba(255,255,255,.075);

      --border: rgba(255,255,255,.10);
      --border-2: rgba(255,255,255,.16);

      --text: rgba(245,245,245,.93);
      --muted: rgba(216,216,216,.70);
      --muted-2: rgba(216,216,216,.54);

      --shadow: rgba(0,0,0,.60);
      --ph-1: rgba(255,255,255,.045);
      --ph-2: rgba(255,255,255,.095);
      --ok: #42d17a;
    }

    :root[data-theme="light"]{
      --bg: #ffffff;
      --bg-2: #f6f6f6;
      --bg-3: #efefef;

      --surface: rgba(0,0,0,.03);
      --surface-2: rgba(0,0,0,.055);
      --surface-3: rgba(0,0,0,.085);

      --border: rgba(0,0,0,.10);
      --border-2: rgba(0,0,0,.16);

      --text: rgba(0,0,0,.90);
      --muted: rgba(0,0,0,.67);
      --muted-2: rgba(0,0,0,.52);

      --shadow: rgba(0,0,0,.18);
      --ph-1: rgba(0,0,0,.035);
      --ph-2: rgba(0,0,0,.085);
      --ok: #1aa957;

      --accent: rgba(30,30,30,.92);
      --accent-soft: rgba(30,30,30,.10);
    }

    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      font-family: var(--font-body);
      font-size: var(--fs-0);
      line-height: 1.58;
      letter-spacing: .015em;
      color: var(--text);
      background: linear-gradient(180deg, var(--bg), var(--bg));
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      overflow-x: hidden;
    }

    img, video, iframe{ max-width:100%; display:block; }
    a{ color: inherit; text-decoration: none; }
    button{ font-family: inherit; color: inherit; }
    .wrap{ width: var(--wrap); margin-inline:auto; }
    .bleed{ width: 100vw; margin-left: calc(50% - 50vw); margin-right: calc(50% - 50vw); }

    body::before{
      content:"";
      position: fixed;
      inset: 0;
      pointer-events:none;
      opacity: .06;
      mix-blend-mode: overlay;
      background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,.14) 1px, transparent 0);
      background-size: 3px 3px;
    }

    @media (prefers-reduced-motion: reduce){
      html{ scroll-behavior:auto; }
      *, *::before, *::after{ animation-duration: 1ms !important; animation-iteration-count: 1 !important; transition-duration: 1ms !important; }
    }

    :root[data-language="it"] [lang="en"]{ display:none !important; }
    :root[data-language="en"] [lang="it"]{ display:none !important; }

    /* Disable pinch/double-tap zoom (mobile) */
    html, body{ touch-action: manipulation; }

    .kicker{
      margin: 0 0 var(--s-2);
      color: var(--muted-2);
      letter-spacing: .14em;
      text-transform: uppercase;
      font-size: .82em;
    }
    .h2{
      font-family: var(--font-display);
      font-size: var(--fs-3);
      line-height: 1.08;
      letter-spacing: .03em;
      margin: 0 0 var(--s-2);
    }
    .lead{ font-size: var(--fs-1); color: var(--muted); margin: 0 0 var(--s-3); max-width: 70ch; }
    .p{ margin: 0 0 var(--s-2); color: var(--muted); max-width: 78ch; }
    .micro{ font-size: .90em; color: var(--muted-2); margin: 0; letter-spacing: .08em; text-transform: uppercase; }

    .emph{ color: var(--accent); font-weight: 900; }
    :focus-visible{ outline: 2px solid color-mix(in oklab, var(--text) 55%, transparent); outline-offset: 3px; }

    .site-header{
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 70;
      background: transparent;
      pointer-events: auto;
    }

    .header__wrap{
      display:flex;
      align-items:center;
      justify-content: flex-end;
      padding: .90rem 0;
      position: relative;
    }

    .headerPill{
      display:inline-flex;
      align-items:center;
      gap: .65rem;
      position: relative;
      border-radius: 22px;
      padding: 0;
      background: transparent;
      border: 1px solid transparent;
      backdrop-filter: none;
      transition: background var(--dur-2) var(--ease-out), border-color var(--dur-2) var(--ease-out), backdrop-filter var(--dur-2) var(--ease-out), box-shadow var(--dur-2) var(--ease-out), padding var(--dur-2) var(--ease-out);
    }

    .headerHomeBtn{ margin-left:auto; }

    .site-header.is-scrolled .headerPill{
      padding: .35rem;
      backdrop-filter: blur(14px);
      background: color-mix(in oklab, var(--bg) 70%, transparent);
      border-color: color-mix(in oklab, var(--border) 85%, transparent);
      box-shadow: 0 22px 110px var(--shadow);
    }

    .site-header.is-over-hero .icon-btn,
    .site-header.is-over-hero .chip-btn{
      color: rgba(255,255,255,.93);
      border-color: rgba(255,255,255,.20);
      background: rgba(0,0,0,.18);
    }

    .site-header.is-over-hero.is-scrolled .headerPill{
      background: rgba(0,0,0,.32);
      border-color: rgba(255,255,255,.18);
    }

    .icon-btn{
      appearance:none;
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      color: var(--text);
      width: 42px;
      height: 42px;
      border-radius: 16px;
      display:grid;
      place-items:center;
      cursor:pointer;
      transition: transform var(--dur-1) var(--ease-out), border-color var(--dur-2) var(--ease-out), background var(--dur-2) var(--ease-out), opacity var(--dur-2) var(--ease-out);
      box-shadow: 0 18px 80px var(--shadow);
    }
    .icon-btn:hover{ transform: translateY(-1px); border-color: var(--border-2); }
    .icon-btn:active{ transform: translateY(0); }
    .icon-btn.is-active{ border-color: color-mix(in oklab, var(--accent) 70%, transparent); }

    .chip-btn{
      appearance:none;
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      color: var(--text);
      height: 42px;
      padding: 0 .75rem;
      border-radius: 16px;
      display:inline-flex;
      align-items:center;
      gap: .55rem;
      cursor:pointer;
      transition: transform var(--dur-1) var(--ease-out), border-color var(--dur-2) var(--ease-out), background var(--dur-2) var(--ease-out), opacity var(--dur-2) var(--ease-out);
      box-shadow: 0 18px 80px var(--shadow);
      letter-spacing: .14em;
      text-transform: uppercase;
      font-weight: 950;
      font-size: .78em;
      line-height: 1;
      white-space: nowrap;
    }
    .chip-btn:hover{ transform: translateY(-1px); border-color: var(--border-2); }
    .chip-btn:active{ transform: translateY(0); }
    .chip-label{ opacity: .95; }

    @media (max-width: 520px){
      .icon-btn{ width:40px; height:40px; }
      .chip-btn{ height:40px; }
    }

    .popMenu{
      position: absolute;
      top: calc(100% + 10px);
      right: 0;
      display:flex;
      align-items:center;
      gap: .55rem;
      padding: .55rem;
      border-radius: 18px;
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: color-mix(in oklab, var(--bg) 70%, transparent);
      backdrop-filter: blur(14px);
      box-shadow: 0 26px 120px var(--shadow);
      transform-origin: top right;
      transform: translateY(-6px) scale(.98);
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--dur-2) var(--ease-out), transform var(--dur-2) var(--ease-out);
    }
    .popMenu.is-open{
      opacity: 1;
      transform: translateY(0) scale(1);
      pointer-events: auto;
    }

    .section{ padding: var(--s-6) 0; }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:.55rem;
      padding: .95rem 1.25rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-weight: 900;
      letter-spacing: .14em;
      text-transform: uppercase;
      cursor:pointer;
      transition: transform var(--dur-1) var(--ease-out), border-color var(--dur-2) var(--ease-out), background var(--dur-2) var(--ease-out), opacity var(--dur-2) var(--ease-out);
      font-size: .86em;
      line-height: 1;
      white-space: nowrap;
      color: var(--text);
      background: transparent;
    }
    .btn--primary{ background: color-mix(in oklab, var(--surface-2) 85%, transparent); }
    .btn--ghost{ background: transparent; }
    .btn:hover{ transform: translateY(-1px); border-color: var(--border-2); }
    .btn:active{ transform: translateY(0); }
    .btn i{ opacity: .9; font-size: 1em; }

    .viewShell{
      position: relative;
      min-height: 60vh;
      will-change: opacity, transform, filter;
    }
    .viewShell.is-swapping{ pointer-events: none; }
    .viewShell.is-leaving{
      opacity: 0;
      transform: translateY(10px);
      filter: blur(2px);
      transition: opacity var(--dur-3) var(--ease-out), transform var(--dur-3) var(--ease-out), filter var(--dur-3) var(--ease-out);
    }
    .viewShell.is-entering{
      opacity: 0;
      transform: translateY(10px);
      filter: blur(2px);
    }
    .viewShell.is-entered{
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
      transition: opacity var(--dur-3) var(--ease-out), transform var(--dur-3) var(--ease-out), filter var(--dur-3) var(--ease-out);
    }

    .hero{
      position: relative;
      padding: clamp(7.5rem, 12vh, 10.5rem) 0 var(--s-6);
      overflow: hidden;
      color: rgba(255,255,255,.93);
    }
    .hero .kicker{ color: rgba(255,255,255,.70); }
    .hero .hero__sub{ color: rgba(255,255,255,.76); }
    .hero .btn{
      color: rgba(255,255,255,.92);
      border-color: rgba(255,255,255,.20);
      background: rgba(0,0,0,.16);
    }
    .hero .btn--primary{ background: rgba(255,255,255,.10); }
    .hero .btn:hover{ border-color: rgba(255,255,255,.32); }

    .hero::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(120% 120% at 20% 0%, rgba(0,0,0,.10), rgba(0,0,0,.72)),
        linear-gradient(180deg, rgba(0,0,0,.40), rgba(0,0,0,.70));
      pointer-events:none;
      z-index: 2;
    }
    .heroVideo{
      position:absolute;
      inset:0;
      z-index: 1;
      overflow:hidden;
      background: linear-gradient(180deg, var(--bg-2), var(--bg));
    }
    .heroVideo__ph{
      position:absolute;
      inset:0;
      background:
        radial-gradient(140% 120% at 18% 10%, var(--ph-2), transparent 60%),
        radial-gradient(120% 120% at 82% 85%, var(--ph-1), transparent 65%),
        linear-gradient(180deg, var(--bg-2), var(--bg));
      animation: phBreath var(--ph-breath) var(--ease-soft) infinite;
      z-index: 1;
    }
    @keyframes phBreath{
      0%{ filter: contrast(1) brightness(1); opacity: .70; }
      50%{ filter: contrast(1.05) brightness(1.04); opacity: .95; }
      100%{ filter: contrast(1) brightness(1); opacity: .70; }
    }
    .heroVideo__thumb{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      object-position: center;
      opacity: 0;
      transform: scale(1.02);
      transition: opacity var(--dur-3) var(--ease-out), transform var(--dur-3) var(--ease-out);
      filter: contrast(1.02) saturate(.95);
      z-index: 2;
      pointer-events:none;
    }
    .heroVideo.is-thumb-loaded .heroVideo__thumb{ opacity: 1; transform: scale(1.00); }

    .heroVideo__mount{
      position:absolute;
      inset:0;
      z-index: 3;
      pointer-events:none;
      opacity: 0;
      transition: opacity var(--dur-3) var(--ease-out);
    }
    .heroVideo.is-mounted .heroVideo__mount{ opacity: 1; }

    .heroVideo__cover{
      position:absolute;
      inset:-10%;
      transform: scale(1.22);
      transform-origin:center;
    }
    .heroVideo__cover iframe{
      width:100%;
      height:100%;
      position:absolute;
      inset:0;
      border:0;
    }
    @media (max-width: 520px){
      .heroVideo__cover{ transform: scale(1.28); }
    }

    .hero__wrap{
      position: relative;
      z-index: 3;
      display:grid;
      grid-template-columns: 1fr;
      gap: var(--s-4);
      align-items: start;
    }
    .hero__title{
      font-family: var(--font-display);
      font-size: var(--fs-4);
      line-height: 1.02;
      letter-spacing: .02em;
      margin: 0 0 var(--s-2);
      max-width: 18ch;
    }
    .hero__sub{
      margin: 0 0 var(--s-3);
      max-width: 72ch;
      font-size: var(--fs-1);
    }
    .hero__cta{ display:flex; flex-wrap: wrap; gap: .75rem; align-items:center; }

    .scrollCue{
      margin-top: var(--s-4);
      display:flex;
      flex-direction: column;
      align-items: flex-start;
      gap: .60rem;
      width: fit-content;
      color: rgba(255,255,255,.60);
      letter-spacing: .14em;
      text-transform: uppercase;
      font-size: .78em;
      pointer-events:none;
    }
    .scrollCue__arrow{
      width: 46px;
      height: 46px;
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 999px;
      display:grid;
      place-items:center;
      background: rgba(0,0,0,.18);
      overflow: hidden;
      box-shadow: 0 18px 90px rgba(0,0,0,.60);
    }
    .scrollCue__arrow i{
      animation: arrowDrop 1.45s var(--ease-soft) infinite;
      opacity: .95;
      color: rgba(255,255,255,.92);
    }
    @keyframes arrowDrop{
      0%{ transform: translateY(-2px); opacity: .55; }
      45%{ transform: translateY(6px); opacity: 1; }
      100%{ transform: translateY(-2px); opacity: .55; }
    }

    .split{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: var(--s-5);
      align-items: start;
    }
    @media (max-width: 980px){
      .split{ grid-template-columns: 1fr; }
    }

    .pillRow{
      margin-top: var(--s-4);
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--s-3);
    }
    @media (max-width: 780px){
      .pillRow{ grid-template-columns: 1fr; }
    }

    .pill{
      border: 0;
      border-radius: 0;
      padding: 0;
      background: transparent;
      box-shadow: none;
    }
    .pill__title{
      margin: 0 0 .35rem;
      font-weight: 950;
      letter-spacing: .14em;
      text-transform: uppercase;
      font-size: .90em;
      color: var(--text);
      display:flex;
      align-items:center;
      gap:.6rem;
    }
    .pill__title i{ color: var(--accent); opacity: .95; }
    .pill__text{ margin: 0; color: var(--muted); max-width: 66ch; }

    .hScroll, .gridItem, .bioPhoto{ border-radius: 0; }

    .hScroll{
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: linear-gradient(180deg, var(--bg-2), var(--bg));
      box-shadow: 0 28px 120px var(--shadow);
      overflow: hidden;
    }
    .hScroll__rail{
      display:flex;
      overflow-x:auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    .hScroll__rail::-webkit-scrollbar{ display:none; }

    .hScroll__item{
      flex: 0 0 100%;
      scroll-snap-align: start;
      position: relative;
      aspect-ratio: 4 / 5;
      background: linear-gradient(180deg, var(--bg-3), var(--bg));
      border-right: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
      overflow:hidden;
    }
    .hScroll__item:last-child{ border-right: 0; }

    /* Media link (clickable for lightbox) */
    .media{
      position:absolute;
      inset:0;
      overflow:hidden;
      background: linear-gradient(180deg, var(--bg-3), var(--bg));
      display:block;
      text-decoration:none;
      color:inherit;
      cursor: zoom-in;
      -webkit-tap-highlight-color: transparent;
    }

    .media__ph{
      position:absolute;
      inset:0;
      background:
        radial-gradient(140% 120% at 18% 10%, var(--ph-2), transparent 60%),
        radial-gradient(120% 120% at 82% 85%, var(--ph-1), transparent 65%),
        linear-gradient(180deg, var(--bg-3), var(--bg));
      animation: phBreath var(--ph-breath) var(--ease-soft) infinite;
    }
    .media__img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      object-position: center;
      opacity: 0;
      transform: scale(1.02);
      filter: blur(2px);
      transition: opacity 680ms var(--ease-out), transform 980ms var(--ease-out), filter 980ms var(--ease-out);
      will-change: opacity, transform, filter;
      pointer-events:none;
    }
    .is-loaded .media__img{
      opacity: 1;
      transform: scale(1);
      filter: blur(0);
    }
    .has-error .media__img{ display:none; }

    .hScroll__meta{
      padding: .85rem 1.05rem;
      display:flex;
      justify-content: center;
      align-items:center;
      border-top: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
    }

    .dots{ display:flex; align-items:center; gap: .45rem; }
    .dot{
      appearance:none;
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: color-mix(in oklab, var(--border) 70%, transparent);
      border: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
      transition: transform var(--dur-2) var(--ease-out), background var(--dur-2) var(--ease-out), border-color var(--dur-2) var(--ease-out);
      cursor: pointer;
      padding: 0;
    }
    .dot.is-active{
      background: var(--accent);
      border-color: color-mix(in oklab, var(--accent) 70%, transparent);
      transform: scale(1.15);
    }
    .dot:focus-visible{ outline: 2px solid color-mix(in oklab, var(--text) 55%, transparent); outline-offset: 4px; }

    .grid3{
      margin-top: var(--s-5);
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: clamp(0.25rem, 0.18rem + 0.30vw, 0.55rem);
    }
    @media (max-width: 980px){
      .grid3{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 560px){
      .grid3{ grid-template-columns: 1fr; }
    }
    .gridItem{
      margin: 0;
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      overflow:hidden;
      background: linear-gradient(180deg, var(--bg-3), var(--bg));
      box-shadow: 0 26px 110px var(--shadow);
      aspect-ratio: 3/4;
      position: relative;
    }

    .stats{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--s-4);
      margin-top: var(--s-5);
    }
    @media (max-width: 980px){
      .stats{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 560px){
      .stats{ grid-template-columns: 1fr; }
    }
    .stat{
      border: 0;
      border-radius: 0;
      padding: 0;
      background: transparent;
      box-shadow: none;
      display:flex;
      align-items:center;
      gap: 1rem;
    }
    .stat__icon{
      width: 46px;
      height: 46px;
      border-radius: 16px;
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      display:grid;
      place-items:center;
      flex: 0 0 auto;
      box-shadow: 0 18px 80px var(--shadow);
    }
    .stat__icon i{
      color: var(--accent);
      opacity: .95;
      transform: translateY(0);
      transition: transform var(--dur-2) var(--ease-out);
    }
    .stat:hover .stat__icon i{ transform: translateY(-1px); }
    .stat__num{
      font-weight: 950;
      letter-spacing: .06em;
      font-size: 1.15rem;
      margin: 0 0 .10rem;
      color: var(--text);
    }
    .stat__label{
      margin: 0;
      color: var(--muted-2);
      letter-spacing: .12em;
      text-transform: uppercase;
      font-size: .78em;
    }

    .bio{
      display:grid;
      grid-template-columns: .90fr 1.10fr;
      gap: var(--s-5);
      align-items: start;
    }
    @media (max-width: 980px){
      .bio{ grid-template-columns: 1fr; }
    }
    .bioPhoto{
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      overflow:hidden;
      background: linear-gradient(180deg, var(--bg-3), var(--bg));
      box-shadow: 0 28px 120px var(--shadow);
      aspect-ratio: 3/4;
      position: relative;
    }

    .contactPage{
      padding: clamp(7.5rem, 12vh, 10.5rem) 0 var(--s-6);
    }
    .contactCard{
      margin-top: var(--s-4);
      border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
      border-radius: var(--r-3);
      padding: var(--s-5);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      box-shadow: 0 30px 140px var(--shadow);
      display:flex;
      flex-wrap: wrap;
      align-items:flex-start;
      justify-content: space-between;
      gap: var(--s-4);
    }
    .contactCard__right{ display:flex; flex-wrap: wrap; gap: .75rem; align-items:center; }

    .btnEmail{ position: relative; }
    .btnEmail__shell{ display:inline-flex; align-items:center; gap:.55rem; white-space: nowrap; }
    .btnEmail__email{ display:none; letter-spacing: .04em; text-transform: none; font-weight: 900; color: var(--accent); }
    .btnEmail.is-done .btnEmail__labelText{ display:none; }
    .btnEmail.is-done .btnEmail__email{ display:inline; }

    .btnBadge{
      position: absolute;
      left: 50%;
      top: -10px;
      transform: translateX(-50%) translateY(-8px);
      background: color-mix(in oklab, var(--bg) 82%, transparent);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: .45rem .70rem;
      box-shadow: 0 22px 80px var(--shadow);
      display:flex;
      align-items:center;
      gap:.45rem;
      opacity: 0;
      pointer-events:none;
      transition: opacity var(--dur-2) var(--ease-out), transform var(--dur-2) var(--ease-out);
      z-index: 10;
      color: var(--text);
      letter-spacing: .10em;
      text-transform: uppercase;
      font-weight: 950;
      font-size: .72em;
      white-space: nowrap;
    }
    .btnBadge i{ color: var(--ok); }
    .btnBadge.is-show{
      opacity: 1;
      transform: translateX(-50%) translateY(-16px);
    }

    .site-footer{
      padding: var(--s-4) 0 var(--s-5);
      border-top: 1px solid color-mix(in oklab, var(--border) 80%, transparent);
      background: color-mix(in oklab, var(--bg) 92%, transparent);
    }
    .footer__wrap{
      display:flex;
      justify-content: space-between;
      gap: var(--s-2);
      align-items:center;
      flex-wrap: wrap;
    }
    .footer__links{ display:flex; gap: .9rem; align-items:center; flex-wrap: wrap; }
    .footer__links a{
      color: var(--muted);
      letter-spacing: .12em;
      text-transform: uppercase;
      font-size: .82em;
      display:inline-flex;
      align-items:center;
      gap: .45rem;
      padding: .25rem .35rem;
      border-radius: 10px;
      transition: color var(--dur-2) var(--ease-out), background var(--dur-2) var(--ease-out);
    }
    .footer__links a:hover{
      color: var(--text);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
    }
    .footer__links i{ color: var(--accent); opacity: .95; }

    .reveal{
      opacity: 0;
      transform: translateY(14px);
      filter: blur(2px);
      transition: opacity var(--dur-3) var(--ease-out), transform var(--dur-3) var(--ease-out), filter var(--dur-3) var(--ease-out);
    }
    .reveal.is-inview{
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
    }



    /* UI corners: niente squircle (come la galleria) */
.icon-btn,
    .chip-btn,
    .btn,
    .btnBadge,
    .headerPill,
    .popMenu,
    .scrollCue__arrow,
    .dot,
.stat__icon,
.contactCard,
.contactCard__right,
.contactCard__left,
    .footer__links a
{
      border-radius: var(--r-ui) !important;
    }

    /* Hero MP4 support */
    .heroVideo__mp4{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
      opacity: .92;
      filter: saturate(1.02) contrast(1.02);
      pointer-events:none;
    }

    /* TECH TEASER (home) */
    .techStrip{
      margin-top: var(--s-3);
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--s-2);
    }
    @media (max-width: 900px){
      .techStrip{ grid-template-columns: 1fr; }
    }
    .techCard{
      background: color-mix(in oklab, var(--surface) 70%, transparent);
      border: 1px solid color-mix(in oklab, var(--border) 75%, transparent);
      overflow: hidden;
    }
    .techCard__media{
      aspect-ratio: 16/10;
      min-height: 320px;
      position: relative;
      overflow: hidden;
    }
    
    @media (max-width: 900px){
      .techCard__media{ min-height: 240px; }
    }
.techCard__media img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
      transform: scale(1.02);
      transition: transform .6s ease, filter .6s ease, opacity .4s ease;
    }
    .techCard:hover .techCard__media img{
      transform: scale(1.06);
      filter: contrast(1.03);
    }

    
    .techCard{
      position: relative;
      cursor: pointer;
    }
    .techCard__hit{
      position:absolute;
      inset:0;
      z-index:3;
      border-radius: inherit;
    }
    .techCard:hover .techCard__media img{
      transform: scale(1.03);
    }

.techCard__cap{
      padding: .9rem .9rem .95rem;
      display:flex;
      flex-direction: column;
      gap: .25rem;
    }

    
/* TECH PAGE (comparison deck, no vertical scroll) */
[data-view="techniques"]{
  height: 100vh;
  overflow: hidden;
}
.techPage{
  height: 100vh;
  overflow: hidden;
  padding-top: 0;
}
.techPage--full{
  height: 100vh;
  overflow: hidden;
  padding: 0;
}

.techDeck{
  position: relative;
  height: 100vh;
  width: 100vw;
  touch-action: none;
  overscroll-behavior: none;
  overflow: hidden;
  border-top: 1px solid color-mix(in oklab, var(--border) 75%, transparent);
  border-bottom: 1px solid color-mix(in oklab, var(--border) 75%, transparent);
  background: radial-gradient(1200px 600px at 70% 20%, color-mix(in oklab, var(--accent) 16%, transparent), transparent 55%);
}
@media (max-width: 900px){
  .techDeck{ min-height: 540px; }
}


.techDeck__hud,
.techDeck__dots,
.techDeck__counter,
.techDeck__hint{
  display:none !important;
}

/* Slides layout: title (left) + image (center) + tutorial (right) */
.techSlide{
  position: absolute;
  inset: 0;
  display: grid;
  grid-template-columns: clamp(220px, 18vw, 420px) 1fr min(360px, 30vw);
  gap: clamp(14px, 2vw, 28px);
  padding: clamp(18px, 3vw, 44px);
  align-items: center;
  justify-items: center;
  opacity: 0;
  transform: translateY(16px) scale(.985);
  pointer-events: none;
  transition: opacity .35s ease, transform .45s ease;
}

.techSlide.is-active{
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

.techSlide__bigTitle{
  justify-self: start;
  align-self: center;
  width: 100%;
  font-family: var(--serif);
  text-transform: uppercase;
  letter-spacing: .06em;
  line-height: .95;
  font-weight: 800;
  font-size: clamp(2.2rem, 4.5vw, 5.2rem);
  color: color-mix(in oklab, var(--fg) 85%, transparent);
  opacity: .95;
  text-wrap: balance;
}

.techSlide__media{
  position: relative;
  width: 100%;
  height: 100%;
  display:flex;
  align-items:center;
  justify-content:center;
}

.techFrame{
  position: relative;
  display: inline-block;
  padding: 10px;
  border: 1px solid color-mix(in oklab, var(--border) 75%, transparent);
  background: color-mix(in oklab, var(--surface) 78%, transparent);
  box-shadow: 0 24px 70px color-mix(in oklab, #000 40%, transparent);
}

.techFrame img{
  display:block;
  width:auto;
  height:auto;
  max-width: min(54vw, 880px);
  max-height: 76vh;
}

/* Tutorial panel (right) */
.tourSide{
  justify-self: end;
  align-self: center;
  width: min(360px, 30vw);
  max-width: 360px;
  background: color-mix(in oklab, var(--bg) 72%, transparent);
  border: 1px solid color-mix(in oklab, var(--border) 65%, transparent);
  backdrop-filter: blur(10px);
  box-shadow: 0 20px 60px color-mix(in oklab, #000 30%, transparent);
  padding: 14px 14px 16px;
  position: relative;
  touch-action: pan-y;
}

.tourSide__grab{
  height: 22px;
  display:flex;
  align-items:center;
  justify-content:center;
  margin: -6px -6px 8px;
  cursor: grab;
}
.tourSide__grab::before{
  content:"";
  width: 48px;
  height: 4px;
  border-radius: 99px;
  background: color-mix(in oklab, var(--border) 85%, transparent);
  opacity: .9;
}

.tourSide.is-floating{
  position: fixed;
  z-index: 60;
  left: 24px;
  top: 24px;
  width: min(380px, 36vw);
  cursor: grab;
}

.tourSide.is-floating:active{
  cursor: grabbing;
}

@media (max-width: 900px){
  .techSlide{
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr;
    align-content: start;
    /* meno spazio sopra: guadagniamo viewport per la foto */
    padding: 60px 14px 14px;
    gap: 10px;
  }

  .techSlide__bigTitle{
    justify-self: center;
    text-align: center;
    /* titolo più piccolo su mobile */
    font-size: clamp(1.05rem, 5.8vw, 1.9rem);
    line-height: .92;
    margin-bottom: 4px; /* meno spazio titolo->foto */
  }

  .techSlide__media{
    width: 100%;
    display: flex;
    justify-content: center;
    align-self: start;
    margin-top: 0;
    margin-bottom: 92px; /* spazio per pannello collassato */
    padding: 0;
  }

  /* Frame perfettamente centrato e contenuto nella viewport */
  .techFrame{
    width: calc(100vw - 28px);
    max-width: 520px;
    box-sizing: border-box;
    margin: 0 auto;
    padding: 8px;
  }

  /* L'immagine NON deve mai sbordare dal frame */
  .techFrame img{
    display: block;
    width: 100%;
    height: auto;
    max-width: 100%;
    max-height: 46vh;
    object-fit: contain;
  }

  .tourSide{
    position: fixed;
    left: 10px;
    right: 10px;
    bottom: 10px;
    width: auto;
    max-width: none;
    z-index: 70;
    transform: translateY(0);
    transition: transform .22s ease;
    touch-action: none;
  }
  .tourSide{ --tourCollapsedY: calc(100% - 54px); }
  .tourSide.is-collapsed{
    transform: translateY(var(--tourCollapsedY));
    animation: tourHint 2.6s ease-in-out infinite;
  }
}

@keyframes tourHint{
  0%, 70%, 100%{ transform: translateY(var(--tourCollapsedY, 0px)); }
  85%{ transform: translateY(calc(var(--tourCollapsedY, 0px) - 6px)); }
}


/* Magnifier lens */
.magLens{
  position: fixed;
  width: 240px;
  height: 240px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 80;
  border: 1px solid color-mix(in oklab, var(--border) 75%, transparent);
  box-shadow: 0 18px 60px color-mix(in oklab, #000 40%, transparent);
  background-repeat: no-repeat;
  background-color: color-mix(in oklab, var(--bg) 60%, transparent);
  opacity: 0;
  transform: scale(.92);
  transition: opacity .14s ease, transform .14s ease;
}
.magLens.is-on{
  opacity: 1;
  transform: scale(1);
}
.techFrame.is-magnify{
  cursor: none;
}
.tourPin{
  position: absolute;
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: color-mix(in oklab, var(--accent) 75%, #fff);
  box-shadow: 0 0 0 6px color-mix(in oklab, var(--accent) 20%, transparent),
              0 12px 30px color-mix(in oklab, #000 35%, transparent);
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 6;
}

.tourBubble{
  position: absolute;
  max-width: min(360px, 70vw);
  background: color-mix(in oklab, var(--bg) 68%, transparent);
  border: 1px solid color-mix(in oklab, var(--border) 65%, transparent);
  backdrop-filter: blur(12px);
  padding: .85rem .9rem .8rem;
  box-shadow: 0 24px 90px color-mix(in oklab, #000 35%, transparent);
  transform: translate(-50%, -112%);
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease, transform .18s ease;
  z-index: 7;
}
.tourBubble.is-visible{
  opacity: 1;
  pointer-events: auto;
}
.tourBubble__title{
  font-family: var(--serif);
  letter-spacing: .02em;
  font-size: 1.05rem;
  margin: 0 0 .35rem;
}
.tourBubble__text{
  margin: 0 0 .65rem;
  color: var(--muted);
  line-height: 1.5;
}
.tourBubble__footer{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: .75rem;
}
.btn--small{
  padding: .55rem .8rem;
  font-size: .95rem;
}
.techSlide__copy{
  position: absolute;
  right: clamp(12px, 3vw, 44px);
  top: 50%;
  transform: translateY(-50%);
  width: min(440px, 34vw);
  max-width: 92vw;
  z-index: 7;
}

.tourSide{
  background: color-mix(in oklab, var(--bg) 72%, transparent);
  border: 1px solid color-mix(in oklab, var(--border) 65%, transparent);
  padding: 1rem 1rem 1.05rem;
  backdrop-filter: blur(12px);
  box-shadow: 0 20px 60px color-mix(in oklab, #000 35%, transparent);
}

.tourSide__meta{
  display:flex;
  align-items: baseline;
  justify-content: space-between;
  gap: .75rem;
  margin-bottom: .55rem;
}
.tourSide__tech{
  font-family: var(--serif);
  letter-spacing: .02em;
}
.tourSide__progress{
  font-variant-numeric: tabular-nums;
  color: var(--muted);
}
.tourSide__title{
  font-family: var(--serif);
  font-size: clamp(1.15rem, 1.8vw, 1.55rem);
  margin: 0 0 .5rem;
  letter-spacing: .02em;
}
.tourSide__text{
  margin: 0 0 .9rem;
  color: var(--muted);
  line-height: 1.6;
}
.tourSide__next{
  width: 100%;
}
.tourSide__hint{
  margin: .85rem 0 0;
  color: var(--muted);
}

@media (max-width: 900px){
  .techSlide__copy{
    left: 50%;
    right: auto;
    top: auto;
    bottom: 16px;
    transform: translateX(-50%);
    width: min(520px, 92vw);
  }
  .techSlide__media img{
    max-width: min(92vw, 1100px);
    max-height: min(72vh, 760px);
  }
}

.techSlide__title{
  font-family: var(--serif);
  font-size: clamp(1.35rem, 2.4vw, 2.1rem);
  margin: 0 0 .45rem;
  letter-spacing: .02em;
}
.techSlide__text{
  margin: 0 0 .75rem;
  color: var(--muted);
  line-height: 1.55;
}
.techSlide__bullets{
  margin: 0;
  padding-left: 1.05rem;
  color: var(--muted);
  display:grid;
  gap: .25rem;
}


/* Lightbox: minimale, niente corners strani */
    .glightbox-clean .gdesc-inner,
    .glightbox-clean .gslide-description{ display:none !important; }

/* Header: mostra Home solo fuori dalla home */
body.is-home-route .headerHomeBtn{ display:none !important; }
body.is-home-route .headerPill{ justify-content:flex-start; }
  </style>

  

</head>

<body>
  <a class="skip-link" href="#main">Vai al contenuto</a>

  <header class="site-header" data-component="header">
    <div class="wrap header__wrap">
      <div class="headerPill" data-header-pill>
        <button class="icon-btn" type="button" data-action="toggle-menu" aria-label="Menu" aria-expanded="false" title="Menu">
          <i class="fa-solid fa-bars"></i>
        </button>

        <div class="popMenu" data-popmenu aria-hidden="true">
          <a class="icon-btn" href="./" data-route="/" aria-label="Home" title="Home">
            <i class="fa-solid fa-house"></i>
          </a>

          <a class="icon-btn" href="./tecniche" data-route="/tecniche" aria-label="Tecniche" title="Tecniche">
            <i class="fa-solid fa-layer-group"></i>
          </a>

          <a class="icon-btn" href="./contatti" data-route="/contatti" aria-label="Contatti" title="Contatti">
            <i class="fa-solid fa-paper-plane"></i>
          </a>

          <button class="icon-btn" type="button" data-action="toggle-theme" aria-label="Cambia tema (dark/light)" title="Tema">
            <i class="fa-solid fa-sun"></i>
          </button>

          <button class="chip-btn" type="button" data-action="toggle-language" title="Lingua">
            <i class="fa-solid fa-globe"></i>
            <span class="chip-label" data-lang-label>IT</span>
          </button>
        </div>

        <a class="icon-btn headerHomeBtn" href="./" data-route="/" aria-label="Home" title="Home">
          <i class="fa-solid fa-house"></i>
        </a>
      </div>
    </div>
  </header>

  <main id="main">
    <div class="viewShell" data-view-shell aria-live="polite">
      <div data-view="home" data-home-view>
        <section class="hero" aria-label="Intro" data-hero>
          <div class="heroVideo" data-hero-video data-video-url="https://www.youtube.com/watch?v=nSSJRcRtqpo" data-video-start="8" data-video-autoplay="0" aria-hidden="true">
            <div class="heroVideo__ph"></div>
            <img class="heroVideo__thumb" alt="" data-thumb>
            <div class="heroVideo__mount" data-video-mount></div>
          </div>

          <div class="wrap hero__wrap">
            <div class="reveal">
              <p class="kicker">Emanuele Passarelli</p>

              <h1 class="hero__title">
                <span lang="it">Artigiano del Ritratto</span>
                <span lang="en">Portrait Artisan</span>
              </h1>

              <p class="hero__sub">
                <span lang="it">Ritratti in grande formato, tecniche antiche e stampe da custodire. Un lavoro lento e preciso, pensato per restare.</span>
                <span lang="en">Large-format portraits, historic techniques, and prints to keep. A slow and precise process designed to last.</span>
              </p>

              <div class="hero__cta">
                <a class="btn btn--primary" href="#ritratto" data-route="#ritratto">
                  <i class="fa-solid fa-compass"></i>
                  <span lang="it">Scopri</span><span lang="en">Discover</span>
                </a>

                <a class="btn btn--ghost" href="./contatti" data-route="/contatti">
                  <i class="fa-solid fa-paper-plane"></i>
                  <span lang="it">Contatti</span><span lang="en">Contact</span>
                </a>
              </div>

              <div class="scrollCue" aria-hidden="true">
                <div><span lang="it">Scorri</span><span lang="en">Scroll</span></div>
                <div class="scrollCue__arrow"><i class="fa-solid fa-arrow-down"></i></div>
              </div>
            </div>
          </div>
        </section>

        <section id="ritratto" class="section" aria-label="Ritratto Unico">
          <div class="wrap split">
            <div class="reveal">
              <p class="kicker">
                <span lang="it">Ritratto in grande formato</span>
                <span lang="en">Large-format portrait</span>
              </p>

              <h2 class="h2">
                <span lang="it">Ritratto Unico</span>
                <span lang="en">Unique Portrait</span>
              </h2>

              <p class="lead">
                <span lang="it">Avere un proprio ritratto stampato è la testimonianza di chi siamo, ti verrà dedicata una sessione fotografica per poter lasciare una traccia di te.</span>
                <span lang="en">Having your own portrait printed is a testimony of who you are. You will be given a dedicated photo session to leave a trace of yourself.</span>
              </p>

              <div class="pillRow" aria-label="Punti chiave">
                <article class="pill reveal">
                  <h3 class="pill__title">
                    <i class="fa-solid fa-star"></i>
                    <span lang="it">Diventa un'opera d'arte</span><span lang="en">Become a work of art</span>
                  </h3>
                  <p class="pill__text">
                    <span lang="it">Avere un proprio ritratto stampato è la testimonianza di chi siamo, ti verrà dedicata una sessione fotografica per poter lasciare una traccia di te.</span>
                    <span lang="en">Having your own portrait printed is a testimony of who you are. You will be given a dedicated photo session to leave a trace of yourself.</span>
                  </p>
                </article>

                <article class="pill reveal">
                  <h3 class="pill__title">
                    <i class="fa-solid fa-camera-retro"></i>
                    <span lang="it">Tecniche antiche</span><span lang="en">Ancient techniques</span>
                  </h3>
                  <p class="pill__text">
                    <span lang="it">Avrai modo di essere scattato con delle tecniche fotografiche antiche tramite un banco ottico, la luce e l'argento scriveranno su supporti di alluminio, vetro e pellicole.</span>
                    <span lang="en">You will be photographed using historic techniques with a large-format camera: light and silver will write on aluminum, glass, and film.</span>
                  </p>
                </article>

                <article class="pill reveal">
                  <h3 class="pill__title">
                    <i class="fa-solid fa-map"></i>
                    <span lang="it">Italia nel Grande Formato</span><span lang="en">Italy in Large Format</span>
                  </h3>
                  <p class="pill__text">
                    <span lang="it">Hai la possibilità di far parte di una immensa raccolta di ritratti Passarelliani che negli anni è diventata essa stessa un'opera unica.</span>
                    <span lang="en">You can become part of a vast collection of Passarelli portraits that, over the years, has become a unique work in itself.</span>
                  </p>
                </article>

                <article class="pill reveal">
                  <h3 class="pill__title">
                    <i class="fa-solid fa-image"></i>
                    <span lang="it">Opera finita</span><span lang="en">Finished piece</span>
                  </h3>
                  <p class="pill__text">
                    <span lang="it">Alla fine della sessione fotografica riceverai un tuo ritratto stampato da custodire, per poterlo tramandare alle tue future generazioni.</span>
                    <span lang="en">At the end of the session you will receive a printed portrait to keep, so you can pass it on to future generations.</span>
                  </p>
                </article>
              </div>
            </div>

            <div class="reveal">
              <div class="hScroll" data-hscroll aria-label="Gallery orizzontale Ritratto Unico">
                <div class="hScroll__rail" data-hscroll-rail>
                  <div class="hScroll__item" >
                    <a class="media glightbox" href="img/EmanuelePassarelli01.jpg" data-gallery="ritratto" data-type="image" aria-label="Apri immagine 1">
                      <div class="media__ph" aria-hidden="true"></div>
                      <img class="media__img" data-src="img/EmanuelePassarelli01.jpg" alt="Ritratto Unico, foto 01" decoding="async" loading="lazy">
                    </a>
                  </div>

                  <div class="hScroll__item" >
                    <a class="media glightbox" href="img/EmanuelePassarelli03.jpg" data-gallery="ritratto" data-type="image" aria-label="Apri immagine 2">
                      <div class="media__ph" aria-hidden="true"></div>
                      <img class="media__img" data-src="img/EmanuelePassarelli03.jpg" alt="Ritratto Unico, foto 02" decoding="async" loading="lazy">
                    </a>
                  </div>

                  <div class="hScroll__item" >
                    <a class="media glightbox" href="img/EmanuelePassarelli02.jpg" data-gallery="ritratto" data-type="image" aria-label="Apri immagine 3">
                      <div class="media__ph" aria-hidden="true"></div>
                      <img class="media__img" data-src="img/EmanuelePassarelli02.jpg" alt="Ritratto Unico, foto 03" decoding="async" loading="lazy">
                    </a>
                  </div>

                  <div class="hScroll__item" >
                    <a class="media glightbox" href="img/EmanuelePasserelli00.jpg" data-gallery="ritratto" data-type="image" aria-label="Apri immagine 4">
                      <div class="media__ph" aria-hidden="true"></div>
                      <img class="media__img" data-src="img/EmanuelePasserelli00.jpg" alt="Ritratto Unico, foto 04" decoding="async" loading="lazy">
                    </a>
                  </div>
                </div>

                <div class="hScroll__meta">
                  <div class="dots" aria-label="Navigazione gallery" data-hscroll-dots>
                    <button class="dot is-active" type="button" data-dot="0" aria-label="Vai a foto 1"></button>
                    <button class="dot" type="button" data-dot="1" aria-label="Vai a foto 2"></button>
                    <button class="dot" type="button" data-dot="2" aria-label="Vai a foto 3"></button>
                    <button class="dot" type="button" data-dot="3" aria-label="Vai a foto 4"></button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>


        <section class="section techTeaser" aria-label="Tecniche di stampa e processo">
          <div class="wrap">
            <div class="reveal">
              <p class="kicker">
                <span lang="it">Tecniche e stampe</span>
                <span lang="en">Techniques and prints</span>
              </p>

              <h2 class="h2">
                <span lang="it">Non è un filtro. È un processo.</span>
                <span lang="en">Not a filter. A process.</span>
              </h2>

              <p class="lead" style="max-width: 70ch;">
                <span lang="it">Digitale fine art, pellicola, FP-100, e tecniche antiche su metallo e vetro. Ogni metodo cambia texture, profondità, unicità e permanenza.</span>
                <span lang="en">Fine art digital, film, FP-100, and historic processes on metal and glass. Each method changes texture, depth, uniqueness, and permanence.</span>
              </p>
            </div>

            <div class="reveal" style="margin-top: var(--s-3);">
              <a class="btn btn--primary" href="./tecniche" data-route="/tecniche">
                <i class="fa-solid fa-wand-magic-sparkles"></i>
                <span lang="it">Scopri le differenze</span><span lang="en">Explore the differences</span>
              </a>
            </div>

            <div class="techStrip reveal" aria-label="Anteprima tecniche">
              <figure class="techCard">
                <a class="techCard__hit" href="./tecniche" data-route="/tecniche" aria-label="Explore the differences"></a>
                <div class="techCard__media"><img src="img/EmanuelePassarelli01.jpg" loading="lazy" decoding="async" alt="Stampa fine art digitale"></div>
                <figcaption class="techCard__cap">
                  <strong><span lang="it">Fine art digitale</span><span lang="en">Fine art digital</span></strong>
                  <span class="micro"><span lang="it">Precisione e controllo</span><span lang="en">Precision and control</span></span>
                </figcaption>
              </figure>

              <figure class="techCard">
                <a class="techCard__hit" href="./tecniche" data-route="/tecniche" aria-label="Explore the differences"></a>
                <div class="techCard__media"><img src="img/EmanuelePassarelli02.jpg" loading="lazy" decoding="async" alt="Pellicola e stampa"></div>
                <figcaption class="techCard__cap">
                  <strong><span lang="it">Pellicola</span><span lang="en">Film</span></strong>
                  <span class="micro"><span lang="it">Grana e risposta organica</span><span lang="en">Grain and organic response</span></span>
                </figcaption>
              </figure>

              <figure class="techCard">
                <a class="techCard__hit" href="./tecniche" data-route="/tecniche" aria-label="Explore the differences"></a>
                <div class="techCard__media"><img src="img/EmanuelePassarelli03.jpg" loading="lazy" decoding="async" alt="Tecniche antiche su lastra"></div>
                <figcaption class="techCard__cap">
                  <strong><span lang="it">Tecniche antiche</span><span lang="en">Historic processes</span></strong>
                  <span class="micro"><span lang="it">Vetro e metallo, pezzi unici</span><span lang="en">Glass and metal, one of a kind</span></span>
                </figcaption>
              </figure>
            </div>

            
          </div>
        </section>

        <section id="italia" class="section" aria-label="Italia nel Grande Formato">
          <div class="wrap">
            <div class="reveal">
              <h2 class="h2">
                <span lang="it">Italia nel Grande Formato</span>
                <span lang="en">Italy in Large Format</span>
              </h2>

              <p class="p">
                <span lang="it">
                  Italia nel Grande Formato è un'enciclopedia umana, in cui ogni persona è descritta unicamente dal suo ritratto.
                  È un progetto itinerante che ha coinvolto tutte le regioni italiane, dal sud al nord, dalle maggiori città ai più piccoli paesini, raccogliendo più di cento ritratti.
                  L'Italia viene raccontata attraverso questa raccolta di ritratti, in un viaggio ideale fra volti e paesaggi che costituiscono la principale ricchezza di questo Paese.
                </span>
                <span lang="en">
                  Italy in Large Format is a human encyclopedia, where each person is described only through their portrait.
                  It is a traveling project that has involved every Italian region, from south to north, from major cities to the smallest villages, collecting more than a hundred portraits.
                  Italy is told through this collection, in an ideal journey among faces and landscapes that are the country's greatest wealth.
                </span>
              </p>

              <p class="p" style="margin-bottom: var(--s-4);">
                <span lang="it">Tutti i ritratti sono stati realizzati con un banco ottico e costituiscono nel loro insieme un'opera unica.</span>
                <span lang="en">All portraits were made with a large-format camera and, together, form a single unique work.</span>
              </p>
            </div>

            <div class="grid3" aria-label="Gallery 3x3">
              <figure class="gridItem reveal" >
                <a class="media glightbox" href="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n1.jpg" data-gallery="italia" data-type="image" aria-label="Apri foto 1">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n1.jpg" alt="Italia nel Grande Formato, foto 01" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" >
                <a class="media glightbox" href="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n10.jpg" data-gallery="italia" data-type="image" aria-label="Apri foto 2">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n10.jpg" alt="Italia nel Grande Formato, foto 02" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" >
                <a class="media glightbox" href="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n2.jpg" data-gallery="italia" data-type="image" aria-label="Apri foto 3">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n2.jpg" alt="Italia nel Grande Formato, foto 03" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" >
                <a class="media glightbox" href="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n3.jpg" data-gallery="italia" data-type="image" aria-label="Apri foto 4">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n3.jpg" alt="Italia nel Grande Formato, foto 04" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" >
                <a class="media glightbox" href="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n4.jpg" data-gallery="italia" data-type="image" aria-label="Apri foto 5">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n4.jpg" alt="Italia nel Grande Formato, foto 05" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" >
                <a class="media glightbox" href="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n5.jpg" data-gallery="italia" data-type="image" aria-label="Apri foto 6">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n5.jpg" alt="Italia nel Grande Formato, foto 06" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" >
                <a class="media glightbox" href="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n6.jpg" data-gallery="italia" data-type="image" aria-label="Apri foto 7">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n6.jpg" alt="Italia nel Grande Formato, foto 07" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" >
                <a class="media glightbox" href="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n7.jpg" data-gallery="italia" data-type="image" aria-label="Apri foto 8">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n7.jpg" alt="Italia nel Grande Formato, foto 08" decoding="async" loading="lazy">
                </a>
              </figure>

              <figure class="gridItem reveal" >
                <a class="media glightbox" href="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n9.jpg" data-gallery="italia" data-type="image" aria-label="Apri foto 9">
                  <div class="media__ph" aria-hidden="true"></div>
                  <img class="media__img" data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n9.jpg" alt="Italia nel Grande Formato, foto 09" decoding="async" loading="lazy">
                </a>
              </figure>
            </div>

            <div class="stats" aria-label="Numeri progetto">
              <div class="stat reveal">
                <div class="stat__icon" aria-hidden="true"><i class="fa-solid fa-user"></i></div>
                <div>
                  <p class="stat__num">200+</p>
                  <p class="stat__label"><span lang="it">Passarellini</span><span lang="en">Portraits</span></p>
                </div>
              </div>

              <div class="stat reveal">
                <div class="stat__icon" aria-hidden="true"><i class="fa-solid fa-calendar-day"></i></div>
                <div>
                  <p class="stat__num">8</p>
                  <p class="stat__label"><span lang="it">Compleanni</span><span lang="en">Birthdays</span></p>
                </div>
              </div>

              <div class="stat reveal">
                <div class="stat__icon" aria-hidden="true"><i class="fa-solid fa-map"></i></div>
                <div>
                  <p class="stat__num">17</p>
                  <p class="stat__label"><span lang="it">Regioni visitate</span><span lang="en">Regions</span></p>
                </div>
              </div>

              <div class="stat reveal">
                <div class="stat__icon" aria-hidden="true"><i class="fa-solid fa-compass"></i></div>
                <div>
                  <p class="stat__num">5000</p>
                  <p class="stat__label"><span lang="it">Km percorsi</span><span lang="en">Km traveled</span></p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="bio" class="section" aria-label="Biografia">
          <div class="wrap bio">
            <div class="reveal">
              <figure class="bioPhoto"  aria-label="Foto di Emanuele Passarelli">
                <div class="media__ph" aria-hidden="true"></div>
                <img class="media__img" data-src="img/EmanuelePasserelliBio.jpg" alt="Ritratto di Emanuele Passarelli" decoding="async" loading="lazy">
              </figure>
            </div>

            <div class="reveal">
              <h2 class="h2"><span lang="it">Biografia</span><span lang="en">Biography</span></h2>

              <p class="p">
                <span lang="it">Inizio il mio percorso con la fotografia da autodidatta, all'età di ventun anni. Esordisco con "Solitude", nel 2014, progetto fotografico composto da una serie di autoritratti che raccontano le fasi più significative della mia adolescenza. Nel 2016 con "Night Tour" nascono quelli che verranno chiamati "Ritratti Passarelliani". L'idea di trasportare i miei soggetti immersi nel buio in scenari urbani, illuminati solo dalle luci della città in chiave cinematografica, mi ha fatto premiare con numerosi articoli dedicati e interviste personali. Pochi anni dopo alcuni di questi ritratti diventeranno opere esposte in più città tra Italia e Cina.</span>
                <span lang="en">I began my journey with photography as a self-taught author at the age of twenty-one. I debuted with "Solitude" in 2014, a project of self-portraits that recount the most significant phases of my adolescence. In 2016, with "Night Tour", what would later be called the "Passarelli Portraits" was born. The idea of placing my subjects, immersed in darkness, within urban scenes lit only by city lights in a cinematic key earned me numerous dedicated articles and personal interviews. A few years later, some of these portraits became works exhibited in several cities in Italy and China.</span>
              </p>

              <p class="p">
                <span lang="it">Nel 2017 dopo aver partecipato al workshop "Oltre il ritratto" di Mustafa Sabbagh, grande fonte di ispirazione, realizzo il mio secondo progetto "Mattatoio", un reportage fotografico che attraverso alcuni ritratti notturni su strada, racconta la vita delle prostitute transessuali della periferia romana, con l'intenzione di ridare un'anima e una dignità a queste persone, che vengono dalla società "spersonalificate" e ridotte allo status di scarto sociale.</span>
                <span lang="en">In 2017, after taking part in Mustafa Sabbagh's workshop "Beyond the Portrait", a major source of inspiration, I created my second project, "Mattatoio": a photographic reportage that, through several nocturnal street portraits, tells the lives of transgender sex workers on the outskirts of Rome, with the intention of giving back a soul and dignity to people who are "depersonalized" by society and reduced to the status of social waste.</span>
              </p>

              <p class="p">
                <span lang="it">Nello stesso anno inizio a maturare un interesse sempre più forte nei confronti della fotografia analogica e decido dunque di proseguire con gli studi in questo campo.</span>
                <span lang="en">That same year I began to develop an increasingly strong interest in analog photography and decided to continue my studies in this field.</span>
              </p>

              <p class="p">
                <span lang="it">Nel 2018 lancio "Italia nel Grande Formato", un progetto fotografico che mi ha portato a far riscoprire agli italiani, tramite canali social e interviste cartacee e televisive, l'importanza di avere almeno un proprio ritratto stampato che avesse il compito di testimoniare la loro esistenza. Dopo moltissimi consensi ottenuti finalmente l'iniziativa guadagna i primi 100+ partecipanti tramite una piattaforma crowdfunding, per poi diventare il mio principale impegno fotografico.</span>
                <span lang="en">In 2018 I launched "Italy in Large Format", a photographic project that, through social channels and print and television interviews, helped Italians rediscover the importance of having at least one printed portrait whose task is to testify to their existence. After receiving strong support, the initiative gained its first 100+ participants through a crowdfunding platform, and then became my main photographic commitment.</span>
              </p>

              <p class="micro">
                <span lang="it">Per richieste, disponibilità e collaborazioni:</span>
                <span lang="en">For requests, availability and collaborations:</span>
              </p>

              <div style="margin-top: var(--s-3);">
                <a class="btn btn--primary" href="./contatti" data-route="/contatti">
                  <i class="fa-solid fa-paper-plane"></i>
                  <span lang="it">Vai ai contatti</span><span lang="en">Go to contact</span>
                </a>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>

    <template id="tpl-contact">
      <!-- FIX: wrapper con data-view="contact" -->
      <div data-view="contact" data-contact-view>
        <section class="contactPage" aria-label="Contatti">
          <div class="wrap">
            <div class="reveal">
              <p class="kicker"><span lang="it">Contatti</span><span lang="en">Contact</span></p>
              <h1 class="hero__title" style="max-width: 26ch; margin-bottom: var(--s-2);">
                <span lang="it">Scrivimi per disponibilità e collaborazioni</span>
                <span lang="en">Reach out for availability and collaborations</span>
              </h1>

              <p class="hero__sub" style="margin-bottom: 0; color: var(--muted);">
                <span lang="it">Mi muovo in Italia e all’estero. Se vuoi un ritratto o portare il progetto nella tua città, scrivimi.</span>
                <span lang="en">Available in Italy and internationally. For portraits or to bring the project to your city, write me.</span>
              </p>

              <p class="micro" style="margin-top: .75rem;">
                <span lang="it">Italia · International</span>
                <span lang="en">Italy · International</span>
              </p>
            </div>

            <div class="contactCard reveal">
              <div style="max-width: 72ch;">
                <p class="lead" style="margin:0;">
                  <span lang="it"><span class="emph">Email</span> e <span class="emph">Instagram</span> sono i canali più veloci. Rispondo appena posso.</span>
                  <span lang="en"><span class="emph">Email</span> and <span class="emph">Instagram</span> are the fastest channels. I reply as soon as I can.</span>
                </p>
              </div>

              <div class="contactCard__right" aria-label="Azioni contatto">
                <button class="btn btn--primary btnEmail" type="button" data-action="copy-email" aria-label="Vedi email e copia">
                  <span class="btnBadge" aria-hidden="true" data-email-badge>
                    <i class="fa-solid fa-circle-check"></i>
                    <span lang="it">Copiata</span><span lang="en">Copied</span>
                  </span>

                  <span class="btnEmail__shell">
                    <i class="fa-solid fa-envelope"></i>
                    <span class="btnEmail__labelText"><span lang="it">Vedi email</span><span lang="en">View email</span></span>
                    <span class="btnEmail__email">emanuelepassarelli1@gmail.com</span>
                  </span>
                </button>

                <a class="btn btn--ghost" href="https://instagram.com/emanuelepassarelli" rel="noopener" target="_blank">
                  <i class="fa-brands fa-instagram"></i>
                  <span>Instagram</span>
                </a>
              </div>
            </div>
          </div>
        </section>
      </div>
    </template>


    <template id="tpl-techniques">
  <div data-view="techniques" data-techniques-view>
    <section class="techPage techPage--full" aria-label="Confronto tecniche">
      <div class="techDeck" data-tech-deck>
<!-- Slides -->
        <article class="techSlide is-active" data-tech-slide data-title="Fine art digitale">
          <div class="techSlide__bigTitle" data-tech-bigtitle></div>
          <div class="techSlide__media">
            <div class="techFrame" data-tech-frame>
              <img data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n1.jpg" alt="Stampa fine art digitale">
</div>
          </div>
          <div class="techSlide__copy">
            <div class="tourSide" role="group" aria-label="Guided tour">
              <div class="tourSide__grab" data-tour-grab aria-hidden="true"></div>
              <div class="tourSide__meta">
                <div class="tourSide__tech">
                  <span lang="it">Fine art digitale</span><span lang="en">Fine art digital</span>
                </div>
                <div class="tourSide__progress" data-tour-progress>1/3</div>
              </div>

              <h3 class="tourSide__title" data-tour-title></h3>
              <p class="tourSide__text" data-tour-text></p>

              <button class="btn btn--primary tourSide__next" type="button" data-tour-next>
                <span lang="it">Avanti</span><span lang="en">Next</span>
              </button>
</div>
          </div>
        </article>

        <article class="techSlide" data-tech-slide data-title="Pellicola">
          <div class="techSlide__bigTitle" data-tech-bigtitle></div>
          <div class="techSlide__media">
            <div class="techFrame" data-tech-frame>
              <img data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n3.jpg" alt="Pellicola e stampa">
</div>
          </div>
          <div class="techSlide__copy">
            <div class="tourSide" role="group" aria-label="Guided tour">
              <div class="tourSide__grab" data-tour-grab aria-hidden="true"></div>
              <div class="tourSide__meta">
                <div class="tourSide__tech">
                  <span lang="it">Pellicola</span><span lang="en">Film</span>
                </div>
                <div class="tourSide__progress" data-tour-progress>1/3</div>
              </div>

              <h3 class="tourSide__title" data-tour-title></h3>
              <p class="tourSide__text" data-tour-text></p>

              <button class="btn btn--primary tourSide__next" type="button" data-tour-next>
                <span lang="it">Avanti</span><span lang="en">Next</span>
              </button>
</div>
          </div>
        </article>

        <article class="techSlide" data-tech-slide data-title="FP-100">
          <div class="techSlide__bigTitle" data-tech-bigtitle></div>
          <div class="techSlide__media">
            <div class="techFrame" data-tech-frame>
              <img data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n5.jpg" alt="FP-100 peel apart">
</div>
          </div>
          <div class="techSlide__copy">
            <div class="tourSide" role="group" aria-label="Guided tour">
              <div class="tourSide__grab" data-tour-grab aria-hidden="true"></div>
              <div class="tourSide__meta">
                <div class="tourSide__tech">
                  <span lang="it">FP-100</span><span lang="en">FP-100</span>
                </div>
                <div class="tourSide__progress" data-tour-progress>1/3</div>
              </div>

              <h3 class="tourSide__title" data-tour-title></h3>
              <p class="tourSide__text" data-tour-text></p>

              <button class="btn btn--primary tourSide__next" type="button" data-tour-next>
                <span lang="it">Avanti</span><span lang="en">Next</span>
              </button>
</div>
          </div>
        </article>

        <article class="techSlide" data-tech-slide data-title="Tintype">
          <div class="techSlide__bigTitle" data-tech-bigtitle></div>
          <div class="techSlide__media">
            <div class="techFrame" data-tech-frame>
              <img data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n9.jpg" alt="Collodio Tintype su metallo">
</div>
          </div>
          <div class="techSlide__copy">
            <div class="tourSide" role="group" aria-label="Guided tour">
              <div class="tourSide__grab" data-tour-grab aria-hidden="true"></div>
              <div class="tourSide__meta">
                <div class="tourSide__tech">
                  <span lang="it">Collodio Tintype</span><span lang="en">Collodion Tintype</span>
                </div>
                <div class="tourSide__progress" data-tour-progress>1/3</div>
              </div>

              <h3 class="tourSide__title" data-tour-title></h3>
              <p class="tourSide__text" data-tour-text></p>

              <button class="btn btn--primary tourSide__next" type="button" data-tour-next>
                <span lang="it">Avanti</span><span lang="en">Next</span>
              </button>
</div>
          </div>
        </article>

        <article class="techSlide" data-tech-slide data-title="Ambrotype">
          <div class="techSlide__bigTitle" data-tech-bigtitle></div>
          <div class="techSlide__media">
            <div class="techFrame" data-tech-frame>
              <img data-src="img/EmanuelePassarelli_ItalianelGrandeFormato_2018_n10.jpg" alt="Ambrotype su vetro">
</div>
          </div>
          <div class="techSlide__copy">
            <div class="tourSide" role="group" aria-label="Guided tour">
              <div class="tourSide__grab" data-tour-grab aria-hidden="true"></div>
              <div class="tourSide__meta">
                <div class="tourSide__tech">
                  <span lang="it">Ambrotype</span><span lang="en">Ambrotype</span>
                </div>
                <div class="tourSide__progress" data-tour-progress>1/3</div>
              </div>

              <h3 class="tourSide__title" data-tour-title></h3>
              <p class="tourSide__text" data-tour-text></p>

              <button class="btn btn--primary tourSide__next" type="button" data-tour-next>
                <span lang="it">Avanti</span><span lang="en">Next</span>
              </button>
</div>
          </div>
        </article>

      </div>
    </section>
  </div>
</template>
  </main>

  <footer class="site-footer" data-component="footer">
    <div class="wrap footer__wrap">
      <p class="micro">© <span data-year></span> Emanuele Passarelli</p>
      <div class="footer__links">
        <a href="#main" data-action="back-to-top"><i class="fa-solid fa-arrow-up"></i><span lang="it">Top</span><span lang="en">Top</span></a>
        <a href="./tecniche" data-route="/tecniche"><i class="fa-solid fa-layer-group"></i><span lang="it">Tecniche</span><span lang="en">Techniques</span></a>
        <a href="./contatti" data-route="/contatti"><i class="fa-solid fa-paper-plane"></i><span lang="it">Contatti</span><span lang="en">Contact</span></a>
      </div>
    </div>
  </footer>

  <div class="sr-only" aria-live="polite" aria-atomic="true" data-announcer></div>

  <!-- Lightbox JS (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>

  <script>
    (function(){
      "use strict";

      const root = document.documentElement;
      const header = document.querySelector('[data-component="header"]');
      const announcer = document.querySelector('[data-announcer]');
      const viewShell = document.querySelector('[data-view-shell]');
      const tplContact = document.getElementById('tpl-contact');
      const tplTechniques = document.getElementById('tpl-techniques');

      const popMenu = document.querySelector('[data-popmenu]');
      const menuToggle = document.querySelector('[data-action="toggle-menu"]');

      const emailValue = "emanuelepassarelli1@gmail.com";
      let HOME_HTML = "";
      let heroIO = null;

      let cleanupView = null;

const initTechniquesDeck = (scope) => {
  const rootEl = scope || document;
  const deck = rootEl.querySelector('[data-tech-deck]');
  const slides = Array.from(rootEl.querySelectorAll('[data-tech-slide]'));

  if(!deck || slides.length < 1) return () => {};

  // Guided steps (3 per technique). x/y are kept for future hotspot use, but we don't render pins.
  const STEPS = [
  // Fine art digitale
  [
    { x: 64, y: 26,
      it: { t: "Controllo e coerenza", d: "Nel digitale fine art puoi scegliere con precisione tono, contrasto e micro-dettaglio. Questo significa che l’immagine può essere riprodotta in modo coerente, utile per edizioni e serie dove ogni suggerimento visivo deve rimanere identico." },
      en: { t: "Control and consistency", d: "Fine art digital lets you precisely shape tone, contrast, and micro-detail. That means consistent reproduction, ideal for editions and series where the visual intent must stay the same across copies." }
    },
    { x: 38, y: 54,
      it: { t: "Carta e inchiostri", d: "La resa finale dipende da carta e inchiostri pigmentati: texture, bianchi, e profondità dei neri cambiano tutto. Qui è dove si costruisce la “materia” della stampa, con superfici che vanno dal matte vellutato al baryta più brillante." },
      en: { t: "Paper and inks", d: "The final look depends on paper and pigment inks: texture, paper whites, and black depth change everything. This is where the print’s material quality is built, from velvety matte surfaces to brighter baryta finishes." }
    },
    { x: 56, y: 78,
      it: { t: "Precisione in stampa", d: "Dal monitor alla stampa serve calibrazione e prove, altrimenti i dettagli si perdono. Un buon flusso fine art mantiene fedeli pelle, cieli e ombre, evitando dominanti indesiderate e preservando le sfumature più sottili." },
      en: { t: "Print accuracy", d: "From screen to paper you need calibration and test prints, or details get lost. A solid fine art workflow preserves skin tones, skies, and shadows, avoiding unwanted color casts and keeping subtle gradations intact." }
    }
  ],

  // Pellicola
  [
    { x: 62, y: 28,
      it: { t: "Grana e tridimensionalità", d: "La pellicola introduce grana e micro-irregolarità che danno corpo all’immagine. La transizione tra luci e ombre è spesso più morbida, e il risultato può sembrare più “profondo” anche senza essere più nitido." },
      en: { t: "Grain and depth", d: "Film adds grain and micro-variation that gives the image a tactile presence. Highlight to shadow transitions can be gentler, and the result often feels deeper even when it isn’t sharper." }
    },
    { x: 40, y: 56,
      it: { t: "Luce e esposizione", d: "Qui contano davvero le scelte in ripresa: come esponi, che lente usi, che tipo di luce c’è. La pellicola perdona in modo diverso, ma chiede disciplina: ogni scatto è una decisione, non una raffica." },
      en: { t: "Light and exposure", d: "On film, decisions at capture matter: exposure, lens character, and the quality of light. Film forgives differently, but it asks for discipline: each frame is a decision, not a burst." }
    },
    { x: 54, y: 82,
      it: { t: "Sviluppo e carattere", d: "Lo sviluppo è parte del look: tempi, chimica e scansione cambiano la resa. È un processo che lascia impronte sottili e un carattere riconoscibile, spesso più “umano” e meno perfetto." },
      en: { t: "Development character", d: "Processing is part of the look: timing, chemistry, and scanning shape the result. It leaves subtle fingerprints and a recognizable character, often more human and less perfect." }
    }
  ],

  // FP-100
  [
    { x: 66, y: 26,
      it: { t: "Chimica visibile", d: "FP-100 è istantanea peel-apart: bordi, macchie, micro-difetti e sorprese fanno parte dell’opera. Non è un file “pulito”, è un oggetto con segni e incidenti controllati, e proprio per questo ha fascino." },
      en: { t: "Visible chemistry", d: "FP-100 is peel-apart instant film: borders, stains, micro-defects, and surprises are part of the piece. It’s not a clean file, it’s an object with controlled accidents, and that’s exactly the charm." }
    },
    { x: 38, y: 56,
      it: { t: "Unicità immediata", d: "Ogni scatto è unico e succede davanti a te: estrai, aspetti, separi. Il tempo di sviluppo e la temperatura cambiano colori e contrasto, quindi il risultato non è mai identico due volte." },
      en: { t: "Instant uniqueness", d: "Each shot is unique and happens in front of you: pull, wait, peel. Development time and temperature shift color and contrast, so results are never identical twice." }
    },
    { x: 56, y: 82,
      it: { t: "Oggetto e memoria", d: "L’istantanea è già “finita”: la puoi tenere in mano, graffia, invecchia, porta tracce. È fotografia come reliquia, con una presenza fisica che comunica subito che non è una riproduzione." },
      en: { t: "Object and memory", d: "The instant is already finished: you can hold it, it scratches, it ages, it carries marks. It’s photography as a relic, with a physical presence that instantly reads as not just a reproduction." }
    }
  ],

  // Tintype
  [
    { x: 60, y: 26,
      it: { t: "Metallo e contrasto", d: "Il tintype è collodio su metallo: neri densi, luci dure e un look molto grafico. Cambia con l’angolo di luce e con il modo in cui lo guardi, come se l’immagine fosse scolpita sulla superficie." },
      en: { t: "Metal and contrast", d: "Tintype is collodion on metal: dense blacks, punchy highlights, and a graphic look. It shifts with viewing angle and light, as if the image were carved into the surface." }
    },
    { x: 40, y: 56,
      it: { t: "Pezzo unico", d: "Non esiste “la copia perfetta”: ogni lastra è una sola, e porta difetti, colature e segni del processo. È fotografia come oggetto irripetibile, più vicino alla scultura che alla stampa." },
      en: { t: "One of a kind", d: "There is no perfect copy: each plate is singular and carries flaws, streaks, and process marks. It’s photography as an unrepeatable object, closer to sculpture than printing." }
    },
    { x: 56, y: 82,
      it: { t: "Rituale e tempo", d: "Preparazione della lastra, sensibilizzazione, esposizione e sviluppo vanno fatti con tempi precisi. Questa urgenza crea un’energia particolare: tutto accade nel presente, e l’immagine nasce come evento." },
      en: { t: "Ritual and timing", d: "Plate prep, sensitizing, exposure, and development must happen within strict timing. That urgency creates a special energy: everything happens in the present, and the image is born as an event." }
    }
  ],

  // Ambrotype
  [
    { x: 62, y: 26,
      it: { t: "Vetro e luce interna", d: "L’ambrotipo è collodio su vetro: sembra illuminarsi da dentro, con un effetto quasi tridimensionale. I mezzi toni possono apparire delicati e “lattei”, molto diversi dalla resa su carta." },
      en: { t: "Glass and inner light", d: "Ambrotype is collodion on glass: it can look lit from within, almost dimensional. Midtones often feel delicate and milky, very different from paper-based prints." }
    },
    { x: 40, y: 56,
      it: { t: "Fragile e prezioso", d: "Il supporto è delicato e richiede protezione, spesso con custodie e montaggi. Questa fragilità lo rende prezioso: non è pensato per essere “consumato”, ma conservato." },
      en: { t: "Fragile and precious", d: "The support is delicate and often needs cases and careful mounting. That fragility makes it precious: it’s not meant to be consumed, but preserved." }
    },
    { x: 56, y: 82,
      it: { t: "Impronta del processo", d: "Ogni ambrotipo porta tracce: piccoli difetti, bordi, variazioni chimiche e texture. È la firma del processo, un linguaggio visivo che racconta come l’immagine è stata fatta, non solo cosa mostra." },
      en: { t: "Process fingerprint", d: "Every ambrotype carries traces: tiny defects, edges, chemical variation, and texture. It’s the process signature, a visual language that tells how the image was made, not only what it shows." }
    }
  ]
];

  let idx = 0;
  let stepIdx = 0;
  let locked = false;

  const lang = () => (root.getAttribute('data-language') === 'en' ? 'en' : 'it');

  const getEls = (i) => {
    const slide = slides[i];
    if(!slide) return {};
    return {
      big: slide.querySelector('[data-tech-bigtitle]'),
      frame: slide.querySelector('[data-tech-frame]'),
      img: slide.querySelector('img'),
      side: slide.querySelector('.tourSide'),
      grab: slide.querySelector('[data-tour-grab]'),
      title: slide.querySelector('[data-tour-title]'),
      text: slide.querySelector('[data-tour-text]'),
      prog: slide.querySelector('[data-tour-progress]'),
      next: slide.querySelector('[data-tour-next]')
    };
  };

  const setBigTitle = (i) => {
    const s = slides[i];
    const t = (s && (s.getAttribute('data-title') || s.dataset.title)) ? (s.getAttribute('data-title') || s.dataset.title) : '';
    slides.forEach((sl, n) => {
      const { big } = getEls(n);
      if(big) big.textContent = t && n === i ? t : (sl.getAttribute('data-title') || sl.dataset.title || '');
    });
  };

  const renderStep = () => {
    const steps = STEPS[idx] || [];
    const step = steps[stepIdx];
    const els = getEls(idx);
    if(!step) return;

    const L = lang();
    const payload = (step[L] || step.it || {});
    if(els.title) els.title.textContent = payload.t || '';
    if(els.text)  els.text.textContent  = payload.d || '';
    if(els.prog)  els.prog.textContent  = `${stepIdx + 1}/3`;
  };

  const setActive = (nextIdx, nextStepIdx = 0) => {
    const n = Math.max(0, Math.min(slides.length - 1, nextIdx));
    idx = n;
    stepIdx = Math.max(0, Math.min(2, nextStepIdx));

    slides.forEach((s, i) => s.classList.toggle('is-active', i === idx));
    setBigTitle(idx);
    renderStep();
  };

  const nextStep = () => {
    const steps = STEPS[idx] || [];
    if(stepIdx < Math.min(2, steps.length - 1)) {
      stepIdx += 1;
      renderStep();
      return;
    }
    // step finiti: passa alla tecnica successiva (loop)
    goTechnique(1, 0);
  };

  const prevStep = () => {
    if(stepIdx > 0) {
      stepIdx -= 1;
      renderStep();
      return;
    }
    // step iniziale: vai alla tecnica precedente (loop) e atterra sull’ultimo step
    goTechnique(-1, 2);
  };

  const goTechnique = (dir, landingStep = 0) => {
    if(locked) return;

    let next = idx + dir;
    if(next < 0) next = slides.length - 1;
    if(next >= slides.length) next = 0;

    locked = true;
    setActive(next, landingStep);
    window.setTimeout(() => { locked = false; }, 420);
  };

  // Button: Next
  const onNextClick = (e) => {
    e.preventDefault();
    e.stopPropagation();
    nextStep();
  };
  slides.forEach((_, i) => {
    const { next } = getEls(i);
    if(next) next.addEventListener('click', onNextClick);
  });

  // Wheel: advances step (and then technique)
  let wheelAcc = 0;
  const onWheel = (e) => {
    e.preventDefault();
    const dy = e.deltaY || 0;
    wheelAcc += dy;

    const threshold = 70;
    if(Math.abs(wheelAcc) < threshold) return;

    const dir = wheelAcc > 0 ? 1 : -1;
    wheelAcc = 0;

    if(dir > 0) nextStep();
    else prevStep();
  };

  // Keyboard arrows
  const onKeyDown = (e) => {
    if(e.key === 'ArrowRight' || e.key === 'ArrowDown') {
      e.preventDefault();
      nextStep();
      return;
    }
    if(e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
      e.preventDefault();
      prevStep();
      return;
    }
  };

    // Clicking/tapping the photo advances the tutorial step
  slides.forEach((sl) => {
    const frame = sl.querySelector('[data-tech-frame]');
    const img = sl.querySelector('img');
    const handler = (ev) => { ev.preventDefault(); nextStep(); };
    if(frame) frame.addEventListener('click', handler);
    if(img) img.addEventListener('click', handler);
  });

// Touch swipe (horizontal)
  let touchX = null;
  let touchY = null;

  const onTouchStart = (e) => {
    if(!e.touches || !e.touches.length) return;
    touchX = e.touches[0].clientX;
    touchY = e.touches[0].clientY;
  };

  const onTouchMove = (e) => {
    // prevent page scroll while interacting
    if(touchX !== null) e.preventDefault();
  };

  const onTouchEnd = (e) => {
    if(touchX === null) return;
    const endX = e.changedTouches && e.changedTouches[0] ? e.changedTouches[0].clientX : touchX;
    const endY = e.changedTouches && e.changedTouches[0] ? e.changedTouches[0].clientY : touchY;

    const dx = endX - touchX;
    const dy = endY - touchY;

    touchX = null;
    touchY = null;

    // ignore mostly-vertical gestures (let the sheet gesture handle those)
    if(Math.abs(dy) > Math.abs(dx)) return;

    const threshold = 36;
    if(Math.abs(dx) < threshold) return;

    if(dx < 0) nextStep(); // swipe left
    else prevStep();       // swipe right
  };

  // Mobile: bottom sheet drag (collapse / expand)
  const mqMobile = window.matchMedia('(max-width: 900px)');
  let sheetStartY = null;
  let sheetStartCollapsed = false;

  const attachSheet = () => {
    slides.forEach((_, i) => {
      const { side, grab } = getEls(i);
      if(!side || !grab) return;

      const onDown = (ev) => {
        if(!mqMobile.matches) return;
        sheetStartY = (ev.touches && ev.touches[0]) ? ev.touches[0].clientY : ev.clientY;
        sheetStartCollapsed = side.classList.contains('is-collapsed');
      };

      const onMove = (ev) => {
        if(!mqMobile.matches) return;
        if(sheetStartY === null) return;
        const y = (ev.touches && ev.touches[0]) ? ev.touches[0].clientY : ev.clientY;
        const dy = y - sheetStartY;

        // gesture: pull down to collapse, pull up to expand
        if(!sheetStartCollapsed && dy > 10) {
          side.classList.add('is-collapsed');
        }
        if(sheetStartCollapsed && dy < -10) {
          side.classList.remove('is-collapsed');
        }

        ev.preventDefault();
      };

      const onUp = () => {
        sheetStartY = null;
      };

      grab.addEventListener('touchstart', onDown, { passive: true });
      grab.addEventListener('touchmove', onMove, { passive: false });
      grab.addEventListener('touchend', onUp, { passive: true });
    });
  };

  attachSheet();

  // Mobile: start with the tutorial sheet collapsed so it doesn't cover the image
  const collapseSheetIfMobile = () => {
    if(!mqMobile.matches) return;
    slides.forEach((_, i) => {
      const { side } = getEls(i);
      if(side) side.classList.add('is-collapsed');
    });
  };
  collapseSheetIfMobile();
  try{ mqMobile.addEventListener('change', collapseSheetIfMobile); }catch{}

  // Magnifier (desktop only)
  const lens = document.createElement('div');
  lens.className = 'magLens';
  document.body.appendChild(lens);

  const zoom = 2.2;
  const mqDesktop = window.matchMedia('(min-width: 901px)');

  const lensOn = (frame, img) => {
    if(!mqDesktop.matches) return;
    if(!img || !img.currentSrc) return;

    lens.style.backgroundImage = `url("${img.currentSrc}")`;
    lens.classList.add('is-on');
    frame.classList.add('is-magnify');
  };

  const lensOff = (frame) => {
    lens.classList.remove('is-on');
    if(frame) frame.classList.remove('is-magnify');
  };

  const lensMove = (ev, frame, img) => {
    if(!lens.classList.contains('is-on')) return;
    const rect = img.getBoundingClientRect();
    const x = ev.clientX;
    const y = ev.clientY;

    // lens position
    const size = 240;
    lens.style.left = (x - size/2) + 'px';
    lens.style.top  = (y - size/2) + 'px';

    // background position relative to image
    const clamp01 = (v) => Math.min(1, Math.max(0, v));

    const relX = clamp01((x - rect.left) / rect.width);
    const relY = clamp01((y - rect.top) / rect.height);

    const bgW = rect.width * zoom;
    const bgH = rect.height * zoom;

    const bgX = -(relX * bgW - size/2);
    const bgY = -(relY * bgH - size/2);

    lens.style.backgroundSize = `${bgW}px ${bgH}px`;
    lens.style.backgroundPosition = `${bgX}px ${bgY}px`;
  };

  // Attach magnifier events to every slide frame
  slides.forEach((_, i) => {
    const { frame, img } = getEls(i);
    if(!frame || !img) return;

    frame.addEventListener('mouseenter', (ev) => lensOn(frame, img));
    frame.addEventListener('mouseleave', () => lensOff(frame));
    frame.addEventListener('mousemove', (ev) => lensMove(ev, frame, img));
  });

  // Lock page scroll while this view is active
  const prevHtmlOverflow = document.documentElement.style.overflow;
  const prevBodyOverflow = document.body.style.overflow;
  document.documentElement.style.overflow = 'hidden';
  document.body.style.overflow = 'hidden';

  // Bind inputs
  deck.addEventListener('wheel', onWheel, { passive: false });
  deck.addEventListener('touchstart', onTouchStart, { passive: true });
  deck.addEventListener('touchmove', onTouchMove, { passive: false });
  deck.addEventListener('touchend', onTouchEnd, { passive: true });
  window.addEventListener('keydown', onKeyDown);

  // Re-render tour text after language toggle
  const onLangChange = () => renderStep();
  rootEl.addEventListener('languagechange', onLangChange);

  // Initial
  setActive(0, 0);

  // Cleanup
  return () => {
    slides.forEach((_, i) => {
      const { next } = getEls(i);
      if(next) next.removeEventListener('click', onNextClick);
    });

    rootEl.removeEventListener('languagechange', onLangChange);

    deck.removeEventListener('wheel', onWheel);
    deck.removeEventListener('touchstart', onTouchStart);
    deck.removeEventListener('touchmove', onTouchMove);
    deck.removeEventListener('touchend', onTouchEnd);
    window.removeEventListener('keydown', onKeyDown);

    try{ lens.remove(); }catch{}

    document.documentElement.style.overflow = prevHtmlOverflow;
    document.body.style.overflow = prevBodyOverflow;
  };
};;


      // Lightbox instance
      let lightbox = null;

      // GitHub Pages project-site base path
      const GITHUB_REPO = "emanuele-passarelli";
      const isGithubHost = window.location.hostname.toLowerCase().endsWith(".github.io");
      const BASE_PATH = isGithubHost ? ("/" + GITHUB_REPO) : "";

      const prefersReducedMotion = () =>
        window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      const safeStorage = {
        get(key){ try{ return localStorage.getItem(key); }catch{ return null; } },
        set(key,val){ try{ localStorage.setItem(key,val); }catch{ } }
      };

      const announce = (msg) => { if(announcer) announcer.textContent = msg; };

      const normalizeRoute = (p) => {
        let s = (p || '/');
        s = s.replace(/\/+$/, '');
        if(s === '') s = '/';
        if(!s.startsWith('/')) s = '/' + s;
        return s;
      };

      const routeFromLocation = () => {
        let p = window.location.pathname || '/';
        if(BASE_PATH && p.startsWith(BASE_PATH)){
          p = p.slice(BASE_PATH.length) || '/';
        }
        return normalizeRoute(p);
      };

      const withBase = (route) => {
        const r = normalizeRoute(route);
        if(!BASE_PATH) return r;
        if(r === '/') return BASE_PATH + '/';
        return BASE_PATH + r;
      };

      const isMenuOpen = () => popMenu && popMenu.classList.contains('is-open');

      const openMenu = () => {
        if(!popMenu || !menuToggle) return;
        popMenu.classList.add('is-open');
        popMenu.setAttribute('aria-hidden', 'false');
        menuToggle.classList.add('is-active');
        menuToggle.setAttribute('aria-expanded', 'true');
      };

      const closeMenu = () => {
        if(!popMenu || !menuToggle) return;
        popMenu.classList.remove('is-open');
        popMenu.setAttribute('aria-hidden', 'true');
        menuToggle.classList.remove('is-active');
        menuToggle.setAttribute('aria-expanded', 'false');
      };

      const toggleMenu = () => { isMenuOpen() ? closeMenu() : openMenu(); };

      const THEME_KEY = 'ep_theme';
      const applyTheme = (theme) => {
        const t = theme === 'light' ? 'light' : 'dark';
        root.setAttribute('data-theme', t);
        safeStorage.set(THEME_KEY, t);
        document.querySelectorAll('[data-action="toggle-theme"] i').forEach((icon) => {
          icon.className = (t === 'dark') ? 'fa-solid fa-sun' : 'fa-solid fa-moon';
        });
      };
      const initTheme = () => {
        const saved = safeStorage.get(THEME_KEY);
        if(saved){ applyTheme(saved); return; }
        applyTheme('dark');
      };

      const LANG_KEY = 'ep_lang';

      const updateLangToggleUI = () => {
        const l = (root.getAttribute('data-language') === 'en') ? 'en' : 'it';
        const next = (l === 'it') ? 'en' : 'it';

        document.querySelectorAll('[data-lang-label]').forEach(el => {
          el.textContent = l.toUpperCase();
        });

        document.querySelectorAll('[data-action="toggle-language"]').forEach(btn => {
          const aria = (next === 'en') ? 'Cambia lingua in inglese' : 'Switch language to Italian';
          btn.setAttribute('aria-label', aria);
          btn.setAttribute('title', (next === 'en') ? 'EN' : 'IT');
        });
      };

      const applyLanguage = (lang) => {
        const l = lang === 'en' ? 'en' : 'it';
        root.setAttribute('data-language', l);
        safeStorage.set(LANG_KEY, l);
        document.documentElement.setAttribute('lang', l);
        updateLangToggleUI();
        announce(l === 'it' ? 'Lingua impostata su Italiano' : 'Language set to English');
      };

      const initLanguage = () => {
        const params = new URLSearchParams(window.location.search);
        const urlLang = params.get('lang');
        const saved = safeStorage.get(LANG_KEY);
        applyLanguage(urlLang || saved || 'it');
      };

      const initHeaderScroll = () => {
        if(!header) return;
        let ticking = false;

        const onScroll = () => {
          header.classList.toggle('is-scrolled', window.scrollY > 12);
          ticking = false;
        };

        window.addEventListener('scroll', () => {
          if (ticking) return;
          ticking = true;
          requestAnimationFrame(onScroll);
        }, { passive: true });

        onScroll();
      };

      const initHeaderHeroSense = () => {
        if(!header) return;

        header.classList.remove('is-over-hero');
        if(heroIO){ try{ heroIO.disconnect(); }catch{} heroIO = null; }

        const hero = document.querySelector('[data-hero]');
        if(!hero) return;

        if('IntersectionObserver' in window){
          heroIO = new IntersectionObserver((entries) => {
            const entry = entries[0];
            if(!entry) return;
            header.classList.toggle('is-over-hero', !!entry.isIntersecting);
          }, { threshold: 0.15 });

          heroIO.observe(hero);
        } else {
          header.classList.add('is-over-hero');
        }
      };

      const revealIn = (scope) => {
        const rootEl = scope || document;
        const els = Array.from(rootEl.querySelectorAll('.reveal'));
        if(!els.length) return;

        if(prefersReducedMotion()){
          els.forEach(el => el.classList.add('is-inview'));
          return;
        }

        if('IntersectionObserver' in window){
          const io = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
              if(!entry.isIntersecting) return;
              entry.target.classList.add('is-inview');
              io.unobserve(entry.target);
            });
          }, { rootMargin: '0px 0px -10% 0px', threshold: 0.12 });

          els.forEach(el => io.observe(el));
        } else {
          els.forEach(el => el.classList.add('is-inview'));
        }
      };

      const smartMediaIn = (scope) => {
        const rootEl = scope || document;
        const imgs = Array.from(rootEl.querySelectorAll('img[data-src]'));
        if(!imgs.length) return;

        const loadImg = (img) => {
          const src = img.getAttribute('data-src');
          if(!src) return;

          const holder = img.closest('[data-component="smart-media"]') || img.parentElement;
          const onLoad = () => holder && holder.classList.add('is-loaded');
          const onError = () => holder && holder.classList.add('has-error');

          img.addEventListener('load', onLoad, { once: true });
          img.addEventListener('error', onError, { once: true });

          img.setAttribute('src', src);
          img.removeAttribute('data-src');
        };

        if('IntersectionObserver' in window){
          const io = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
              if(!entry.isIntersecting) return;
              io.unobserve(entry.target);
              loadImg(entry.target);
            });
          }, { rootMargin: '0px', threshold: 0.01 });

          imgs.forEach(img => io.observe(img));
        } else {
          imgs.forEach(loadImg);
        }
      };

      const initLightbox = () => {
        if(!window.GLightbox) return;
        if(lightbox){
          try{ lightbox.destroy(); }catch{}
          lightbox = null;
        }
        lightbox = window.GLightbox({
          selector: '.glightbox',
          touchNavigation: true,
          keyboardNavigation: true,
          closeButton: true,
          loop: true,
          zoomable: false,
          draggable: true,
          openEffect: 'fade',
          closeEffect: 'fade',
          slideEffect: 'slide',
          skin: 'clean'
        });
      };

      const initHeroVideo = () => {
  const heroVideo = document.querySelector('[data-hero-video]');
  if(!heroVideo) return;

  const videoUrl = (heroVideo.getAttribute('data-video-url') || '').trim();
  const startAt = Number(heroVideo.getAttribute('data-video-start') || '0') || 0;
  const autoplay = String(heroVideo.getAttribute('data-video-autoplay') || '0') === '1';

  const img = heroVideo.querySelector('[data-thumb]');
  const mount = heroVideo.querySelector('[data-video-mount]');
  if(!videoUrl || !img || !mount) return;

  const reduce = prefersReducedMotion();
  const isYouTube = /youtube\.com|youtu\.be/i.test(videoUrl);

  const getYouTubeId = (url) => {
    try{
      const u = new URL(url);
      if(u.hostname.includes('youtu.be')) return u.pathname.replace('/', '') || '';
      if(u.searchParams.get('v')) return u.searchParams.get('v') || '';
      const m = u.pathname.match(/\/embed\/([^/]+)/);
      return m ? (m[1] || '') : '';
    }catch{
      const m = String(url).match(/(?:v=|youtu\.be\/|\/embed\/)([A-Za-z0-9_-]{6,})/);
      return m ? m[1] : '';
    }
  };

  const mountYouTube = (videoId) => {
    if(heroVideo.classList.contains('is-mounted')) return;

    const cover = document.createElement('div');
    cover.className = 'heroVideo__cover';

    const iframe = document.createElement('iframe');
    iframe.title = "Hero video";
    iframe.loading = "eager";
    iframe.allowFullscreen = false;
    iframe.referrerPolicy = "strict-origin-when-cross-origin";
    iframe.allow = "autoplay; encrypted-media; picture-in-picture; web-share";

    // Use youtube-nocookie to reduce tracking/cookies.
    const params = new URLSearchParams({
      autoplay: (autoplay && !reduce) ? "1" : "0",
      mute: "1",
      playsinline: "1",
      rel: "0",
      modestbranding: "1",
      controls: "0",
      disablekb: "1",
      fs: "0",
      iv_load_policy: "3",
      start: String(Math.max(0, startAt)),
      loop: "1",
      playlist: videoId
    });

    iframe.src = "https://www.youtube-nocookie.com/embed/" + encodeURIComponent(videoId) + "?" + params.toString();

    cover.appendChild(iframe);
    mount.appendChild(cover);
    heroVideo.classList.add('is-mounted');
  };

  const mountMP4 = (srcUrl) => {
    if(heroVideo.classList.contains('is-mounted')) return;

    const v = document.createElement('video');
    v.className = 'heroVideo__mp4';
    v.autoplay = autoplay && !reduce;
    v.muted = true;
    v.loop = true;
    v.playsInline = true;
    v.preload = 'metadata';

    const s = document.createElement('source');
    s.src = srcUrl;
    s.type = 'video/mp4';
    v.appendChild(s);

    v.addEventListener('loadedmetadata', () => {
      if(startAt > 0 && Number.isFinite(startAt)){
        try{ v.currentTime = Math.max(0, startAt); }catch{}
      }
      if(autoplay && !reduce){
        v.play().catch(() => {});
      }
    }, { once: true });

    mount.appendChild(v);
    heroVideo.classList.add('is-mounted');
  };

  const enableClickToPlay = (fn) => {
    // Click-to-play avoids console spam from blocked trackers and keeps the page quiet by default.
    const onClick = () => {
      fn();
      heroVideo.removeEventListener('click', onClick);
      heroVideo.classList.remove('is-clickable');
    };
    heroVideo.classList.add('is-clickable');
    heroVideo.addEventListener('click', onClick, { once: true });
  };

  if(isYouTube){
    const id = getYouTubeId(videoUrl);
    if(!id) return;

    const candidates = [
      `https://i.ytimg.com/vi/${encodeURIComponent(id)}/maxresdefault.jpg`,
      `https://i.ytimg.com/vi/${encodeURIComponent(id)}/hqdefault.jpg`
    ];

    let idx = 0;
    const tryLoad = () => {
      img.onload = () => heroVideo.classList.add('is-thumb-loaded');
      img.onerror = () => { idx += 1; if(idx < candidates.length) tryLoad(); };
      img.src = candidates[idx];
    };
    tryLoad();

    if(autoplay && !reduce){
      // If autoplay is enabled, mount immediately.
      const delayed = () => window.setTimeout(() => mountYouTube(id), 260);
      if('requestIdleCallback' in window){
        window.requestIdleCallback(delayed, { timeout: 1200 });
      } else {
        delayed();
      }
    } else {
      // Default: no iframe until user clicks (prevents blocked tracking errors in console)
      enableClickToPlay(() => mountYouTube(id));
    }
  } else {
    heroVideo.classList.add('is-thumb-loaded');

    if(autoplay && !reduce){
      const delayed = () => window.setTimeout(() => mountMP4(videoUrl), 120);
      if('requestIdleCallback' in window){
        window.requestIdleCallback(delayed, { timeout: 1200 });
      } else {
        delayed();
      }
    } else {
      enableClickToPlay(() => mountMP4(videoUrl));
    }
  }
};

      const initHScroll = () => {
        const box = document.querySelector('[data-hscroll]');
        if(!box) return;
        const rail = box.querySelector('[data-hscroll-rail]');
        const dotsWrap = box.querySelector('[data-hscroll-dots]');
        if(!rail || !dotsWrap) return;

        const dots = Array.from(dotsWrap.querySelectorAll('.dot'));
        const max = dots.length;

        const setActive = (idx) => {
          dots.forEach((d, i) => d.classList.toggle('is-active', i === idx));
        };

        const snapWidth = () => rail.getBoundingClientRect().width || 1;

        const goTo = (idx) => {
          const w = snapWidth();
          const target = Math.max(0, Math.min(max - 1, idx));
          rail.scrollTo({
            left: target * w,
            behavior: prefersReducedMotion() ? 'auto' : 'smooth'
          });
          setActive(target);
        };

        const onScroll = () => {
          const w = snapWidth();
          const idx = Math.round(rail.scrollLeft / w);
          setActive(Math.max(0, Math.min(max - 1, idx)));
        };

        rail.addEventListener('scroll', () => requestAnimationFrame(onScroll), { passive: true });

        dotsWrap.addEventListener('click', (e) => {
          const btn = e.target.closest('.dot[data-dot]');
          if(!btn) return;
          const idx = Number(btn.getAttribute('data-dot'));
          if(Number.isFinite(idx)) goTo(idx);
        });

        setActive(0);
      };

      const copyToClipboard = async (text) => {
        try{
          if(navigator.clipboard && navigator.clipboard.writeText){
            await navigator.clipboard.writeText(text);
            return true;
          }
        }catch{}

        try{
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.setAttribute('readonly', '');
          ta.style.position = 'fixed';
          ta.style.top = '-9999px';
          document.body.appendChild(ta);
          ta.select();
          document.execCommand('copy');
          ta.remove();
          return true;
        }catch{
          return false;
        }
      };

      const showEmailBadge = (btn) => {
        const badge = btn.querySelector('[data-email-badge]');
        if(!badge) return;
        badge.classList.add('is-show');
        window.clearTimeout(badge._t);
        badge._t = window.setTimeout(() => badge.classList.remove('is-show'), 1100);
      };

      const setDocForRoute = (route) => {
        if(route === '/contatti'){
          document.title = (root.getAttribute('data-language') === 'en')
            ? "Contact | Emanuele Passarelli"
            : "Contatti | Emanuele Passarelli";
          return;
        }

        if(route === '/tecniche'){
          document.title = (root.getAttribute('data-language') === 'en')
            ? "Techniques | Emanuele Passarelli"
            : "Tecniche | Emanuele Passarelli";
          return;
        }

        document.title = "Emanuele Passarelli | Artigiano del Ritratto";
      };
      const setRouteUI = (route) => {
        const r = normalizeRoute(route || '/');
        document.body.classList.toggle('is-home-route', r === '/' );
      };


      const swapView = async (route, opts) => {
        if(!viewShell) return;

        const routeNorm = normalizeRoute(route || '/');
        const current = viewShell.querySelector('[data-view]')?.getAttribute('data-view') || 'home';
        const target = (routeNorm === '/contatti')
          ? 'contact'
          : (routeNorm === '/tecniche' ? 'techniques' : 'home');
        if(current === target) return;

        const reduce = prefersReducedMotion();
        const doAnim = !reduce;

        viewShell.classList.add('is-swapping');
        if(doAnim){
          viewShell.classList.add('is-leaving');
          await new Promise(r => window.setTimeout(r, 220));
        }

        if(cleanupView){
          try{ cleanupView(); }catch{}
          cleanupView = null;
        }

        viewShell.innerHTML = '';

        if(target === 'contact'){
          const frag = tplContact.content.cloneNode(true);
          viewShell.appendChild(frag);
        } else if(target === 'techniques'){
          const frag = tplTechniques.content.cloneNode(true);
          viewShell.appendChild(frag);
        } else {
          viewShell.innerHTML = HOME_HTML;
        }

        setDocForRoute(routeNorm);
        setRouteUI(routeNorm);

        viewShell.classList.remove('is-leaving');
        if(doAnim){
          viewShell.classList.add('is-entering');
          void viewShell.offsetHeight;
          viewShell.classList.remove('is-entering');
          viewShell.classList.add('is-entered');
          window.setTimeout(() => viewShell.classList.remove('is-entered'), 740);
        }

        revealIn(viewShell);
        smartMediaIn(viewShell);

        if(target === 'techniques'){
          cleanupView = initTechniquesDeck(viewShell);
        }

        if(target === 'home'){
          initHScroll();
          initHeroVideo();
        }

        initLightbox();
        initHeaderHeroSense();

        if(opts && opts.scrollTo){
          const id = opts.scrollTo;
          const el = document.querySelector(id);
          if(el) el.scrollIntoView({ behavior: prefersReducedMotion() ? 'auto' : 'smooth', block: 'start' });
        } else {
          window.scrollTo({ top: 0, behavior: prefersReducedMotion() ? 'auto' : 'smooth' });
        }

        viewShell.classList.remove('is-swapping');
      };

      const navigate = async (to, options) => {
        const target = to || '/';
        const isHash = target.startsWith('#');

        if(isHash){
          const r = routeFromLocation();
          if(r === '/'){
            const el = document.querySelector(target);
            if(el) el.scrollIntoView({ behavior: prefersReducedMotion() ? 'auto' : 'smooth', block: 'start' });
            return;
          }
          history.pushState({ route: '/' }, "", withBase('/'));
          await swapView('/', { scrollTo: target });
          return;
        }

        const route = (target === '/contatti')
          ? '/contatti'
          : (target === '/tecniche' ? '/tecniche' : '/');
        history.pushState({ route }, "", withBase(route));
        await swapView(route, options);
      };

      const initActions = () => {
        document.addEventListener('click', async (e) => {
          const routeLink = e.target.closest('[data-route]');
          if(routeLink){
            const to = routeLink.getAttribute('data-route');
            const href = routeLink.getAttribute('href') || to || '';
            const dest = to || href;

            if(dest && (dest.startsWith('/') || dest.startsWith('#'))){
              e.preventDefault();
              closeMenu();
              await navigate(dest);
              return;
            }
          }

          const btn = e.target.closest('[data-action]');
          if(!btn) return;
          const action = btn.getAttribute('data-action');

          if(action === 'toggle-menu'){
            e.preventDefault();
            toggleMenu();
            return;
          }

          if(action === 'toggle-theme'){
            const current = root.getAttribute('data-theme') || 'dark';
            const next = current === 'dark' ? 'light' : 'dark';
            applyTheme(next);
            announce(next === 'dark' ? 'Tema scuro attivo' : 'Tema chiaro attivo');
            return;
          }

          if(action === 'toggle-language'){
            const current = (root.getAttribute('data-language') === 'en') ? 'en' : 'it';
            const next = (current === 'it') ? 'en' : 'it';
            applyLanguage(next);
            setDocForRoute(routeFromLocation());
            return;
          }

          if(action === 'back-to-top'){
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: prefersReducedMotion() ? 'auto' : 'smooth' });
            return;
          }

          if(action === 'copy-email'){
            const ok = await copyToClipboard(emailValue);
            btn.classList.add('is-done');
            announce(ok ? 'Email copiata' : 'Copia non riuscita');
            if(ok) showEmailBadge(btn);
            window.clearTimeout(btn._t);
            btn._t = window.setTimeout(() => btn.classList.remove('is-done'), 2200);
            return;
          }
        });

        document.addEventListener('keydown', (e) => {
          if(e.key === 'Escape') closeMenu();
        });

        document.addEventListener('pointerdown', (e) => {
          if(!isMenuOpen()) return;
          const inside = e.target.closest('[data-popmenu]') || e.target.closest('[data-action="toggle-menu"]');
          if(!inside) closeMenu();
        }, { passive: true });

        window.addEventListener('popstate', async () => {
          closeMenu();
          await swapView(routeFromLocation());
        });
      };

      const initYear = () => {
        const el = document.querySelector('[data-year]');
        if(el) el.textContent = String(new Date().getFullYear());
      };

      const initHomeSnapshot = () => {
        if(!viewShell) return;
        const home = viewShell.querySelector('[data-home-view]');
        if(home) HOME_HTML = home.outerHTML;
      };

      const initFirstRoute = async () => {
        const r = routeFromLocation();
        setDocForRoute(r);
        setRouteUI(r);

        if(r === '/contatti'){
          await swapView('/contatti', {});
          return;
        }

        if(r === '/tecniche'){
          await swapView('/tecniche', {});
          return;
        }

        initHeaderHeroSense();
      };

      const init = async () => {
        initTheme();
        initLanguage();

        initHomeSnapshot();
        initActions();
        initHeaderScroll();
        initYear();

        revealIn(document);
        smartMediaIn(document);

        initHScroll();
        initHeroVideo();
        initLightbox();
        initHeaderHeroSense();

        await initFirstRoute();
      };

      if(document.readyState === 'loading'){
        document.addEventListener('DOMContentLoaded', init, { once: true });
      } else {
        init();
      }
    })();
  </script>

  <script>
    // Mobile: disable pinch & double-tap zoom site-wide
    (function(){
      const prevent = (e) => { e.preventDefault(); };
      document.addEventListener('gesturestart', prevent, { passive: false });
      document.addEventListener('gesturechange', prevent, { passive: false });
      document.addEventListener('gestureend', prevent, { passive: false });

      let lastTouchEnd = 0;
      document.addEventListener('touchend', (e) => {
        const now = Date.now();
        if(now - lastTouchEnd <= 300){
          e.preventDefault();
        }
        lastTouchEnd = now;
      }, { passive: false });
    })();
  </script>
</body>
</html>
